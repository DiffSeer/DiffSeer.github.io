{"version":3,"sources":["store/actions/index.js","store/http.js","views/msv2-chart.js","components/MSV2.jsx","views/project-timeline.js","components/ProjectTimeLine.jsx","App.jsx","serviceWorker.js","store/reducer.js","store/index.js","index.js"],"names":["updateSelectedDate","host","uri","query","options","axios","get","this","params","then","res","data","post","headers","payload","console","log","type","updateEdgeReorder","width","height","margin","top","left","bottom","right","svg","tooltip","topK","x","d3","y","color","xAxis","yAxis","scaleUnit","degreeThreshold","line","defined","d","isNaN","sum","date","brush","parseDate","dataset","nodes","node_index","originNodeIndex","industry_index","industry_index2","industry_index3","index_scale","invert_index","edges","dayEdgeCount","days","unfoldDay","dayLocation","metrixUnit","unit","slice_start","slice_end","nodelen","brushWidth","staTheight","staNwidth","container","timeSpan","nodeOrder","dispatch","domain","range","length","clientWidth","clientHeight","g","attr","call","ticks","select","remove","tickSizeOuter","append","drawColorLegendOuter","unfoldDiff","focusSpan","needOrder","threshold","maxmapping","orderweight","unfoldSwitch","msvSwitch","kelpSwitch","colorSwitch","forEach","item","i","originInvertIndex","maxmap","JSON","parse","stringify","originData","mdata","metrixOriginData","diffdata","metrixDiffData","hdata","highMatrix","slice","highData","node_info","node","Array","fill","element","id","degree","posdegree","negdegree","posvalue","negvalue","Math","max","min","strength2","push","MatrixSet","includes","matrix","filter","cell","WeightedOrder","reorder4Weight","matrix_width","location","count","day","Object","values","map","max_value","min_value","weightThreshold","maxStrength2","posrect","T","highScale","nodeScale","mcolor","nodeline","selectAll","join","classed","industry","text","timelabels","parseInt","staTscale","each","ddd","index","day_index","totalPosEdge","totalNegEdge","staNscale1","staNscale2","staNdata","maxFre","negfrequency","posfrequency","localY","area1","y1","y0","curve","area2","datum","Vgap","Hgap","posline","negline","negPath","posPath","kelpCenterData","set","sort","a","b","posbridgeSet","type2","bridgeSet","posbridgeLen","bridgeLen","distance","set1","set2","posNodes1","negNodes1","posNodes2","negNodes2","ifOverlap","posEdge","negEdge","active1","active2","date1","date2","negMix","posMix","initpos","maxdist","index1","index2","dist","abs","x1","x2","y2","lightData","totalposvalue","totalnegvalue","strength","diffRows","diffData","row","rowindex","cellindex","source","target","value","on","event","celldata","matrixData","selector","parentNode","updateUnfoldDiff","updateUnfoldDay","kernel","X","V","v","k","nodecount","weight","mweight","n","N","K","t","reorder","r","j","Mlen","mindex","A","B","rowDist","p","distance_matrix","order","D","moran","r1","r2","cells","m","result","hugeMatrix","row1","concat","weighted_value_rows","start_point","axis_label","linearGradient","style","axis_scale","axis_top","tickSize","tickFormat","axis_bottom","drawColorLegend4Diff","drawColorLegend4Org","View","props","state","resetcheck","streamSwitch","msvnodeSwitch","resetButton","bind","nodeReorder","edgeReorder","MSVSwitch","Chart","init","prevProps","prevState","toString","update","checked","setState","className","title","extra","float","defaultValue","onAfterChange","MaxAfterChange","StrongAfterChange","OrderWeight","shape","onClick","icon","RetweetOutlined","size","checkedChildren","unCheckedChildren","defaultChecked","onChange","KelpSwitch","ReloadOutlined","ref","position","display","flexDirection","justifyContent","alignItems","React","PureComponent","connect","MSVorder","time","symbolSize","symbol","nice","colorScale","extent","selection","dateRange","invert","begin","end","scatter","selectedDate","xScale","yScale","path","moveTo","array","lineTo","App","ProjectTimeLine","MSV2","Boolean","window","hostname","match","reducer","action","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","userID","users","userBehaviors","dayTime","hourBehaviors","minBehaviorsOfHour","userMinBehaviors","selectedCircle","selectedDiffCircle","networkView","diffNetworkView","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.41ab7e8d.chunk.js","sourcesContent":["import Http from '../http';\r\n\r\nconst http = new Http();\r\n\r\n\r\nexport const updateUserID = payload => ({\r\n  type: 'UPDATE_USER_ID',\r\n  payload\r\n});\r\n\r\nexport const updateDayTime = payload => ({\r\n  type: 'UPDATE_DAY_TIME',\r\n  payload\r\n});\r\n\r\nexport const getUserBehaviorsOfHourByTime = payload => async (dispatch) => {\r\n  const result = await http.get('getUserBehaviorsOfHourByTime', {\r\n    userID: payload.userID,\r\n    time: payload.time\r\n  });\r\n  const action = {\r\n    type: 'GET_USER_BEHAVIORS_OF_HOUR_BY_TIME',\r\n    payload: result.res\r\n  };\r\n  dispatch(action);\r\n}\r\n\r\nexport const getUserBehaviorsOfMinByTime = payload => async (dispatch) => {\r\n  const result = await http.get('getUserBehaviorsOfMinByTime', {\r\n    userID: payload.userID,\r\n    time: payload.time\r\n  });\r\n  const action = {\r\n    type: 'GET_USER_BEHAVIORS_OF_MIN_BY_TIME',\r\n    payload: result.res\r\n  };\r\n  dispatch(action);\r\n}\r\n\r\nexport const updateSelectedCircle = payload => {\r\n    return {\r\n      type: 'UPDATE_SELECTEDCIRCLE',\r\n      payload\r\n    }\r\n}\r\nexport const updateSelectedDiffCircle = payload => {\r\n    return {\r\n      type: 'UPDATE_SELECTEDDIFFCIRCLE',\r\n      payload\r\n    }\r\n}\r\nexport const updateSelectedDate = payload => {\r\n    console.log(payload)\r\n    return {\r\n      type: 'UPDATE_SELECTEDDATE',\r\n      payload\r\n    }\r\n}\r\nexport const updateNetworkView = payload => {\r\n    return {\r\n      type: 'UPDATE_NETWORKVIEW',\r\n      payload\r\n    }\r\n}\r\nexport const updateDiffNetworkView = payload => {\r\n    return {\r\n      type: 'UPDATE_DIFFNETWORKVIEW',\r\n      payload\r\n    }\r\n}\r\nexport const addUnfoldDay = payload => {\r\n    return {\r\n      type: 'ADD_UNFOLDDAY',\r\n      payload\r\n    }\r\n}\r\nexport const deleteUnfoldDay = payload => {\r\n    return {\r\n      type: 'DELETE_UNFOLDDAY',\r\n      payload\r\n    }\r\n}\r\nexport const updateUnfoldDay = payload => {\r\n    return {\r\n      type: 'UPDATE_UNFOLDDAY',\r\n      payload\r\n    }\r\n}\r\nexport const updateUnfoldDiff = payload => {\r\n    return {\r\n      type: 'UPDATE_UNFOLDDIFF',\r\n      payload\r\n    }\r\n}\r\nexport const updateNeedOrder = payload => {\r\n    return {\r\n      type: 'UPDATE_NEEDORDER',\r\n      payload\r\n    }\r\n}\r\nexport const updateLocation = payload => {\r\n    return {\r\n      type: 'UPDATE_LOCATION',\r\n      payload\r\n    }\r\n}\r\nexport const updateNodeOrder = payload => {\r\n    return {\r\n      type: 'UPDATE_NODEORDER',\r\n      payload\r\n    }\r\n}\r\nexport const updateFocusSpan = payload => {\r\n    return {\r\n      type: 'UPDATE_FOCUSSPAN',\r\n      payload\r\n    }\r\n}\r\nexport const updateTimeSpan = payload => {\r\n    return {\r\n      type: 'UPDATE_TIMESPAN',\r\n      payload\r\n    }\r\n}\r\nexport const updateUnfoldSwitch = payload => {\r\n    return {\r\n      type: 'UPDATE_UNFOLDSWITCH',\r\n      payload\r\n    }\r\n}\r\nexport const updateEdgeReorder = payload => {\r\n    return {\r\n      type: 'UPDATE_EDGEREORDER',\r\n      payload\r\n    }\r\n}\r\nexport const updateStreamSwitch = payload => {\r\n    return {\r\n      type: 'UPDATE_STREAMSWITCH',\r\n      payload\r\n    }\r\n}\r\nexport const reset = payload => {\r\n    return {\r\n      type: 'RESET',\r\n      payload\r\n    }\r\n}\r\n;","import axios from 'axios'\r\n\r\nexport default class Http {\r\n\r\n  host = 'http://localhost:5201/api';\r\n\r\n  get (uri, query, options) {\r\n    return axios.get(`${this.host}/${uri}`, { params: query })\r\n      .then(res => {\r\n        return res.data;\r\n      })\r\n  }\r\n\r\n  post (uri, query, options) {\r\n    return axios.post(`${this.host}/${uri}`, query ,{headers:{'Content-Type': 'application/json'}})\r\n      .then(res => {\r\n        return res.data;\r\n      })\r\n  }\r\n}","import * as d3 from 'd3';\r\n//dataset1\r\nimport originData from './data/dataset1/28_all28_diffChart_100.json';\r\nimport metrixOriginData from './data/dataset1/28_all28_oriGraph_100.json';\r\nimport metrixDiffData from './data/dataset1/28_all28_diffGraph_100.json';\r\nimport highMatrix from './data/dataset1/28_all28_high_m_100.json'\r\n\r\n\r\nimport {updateUnfoldDay,updateNodeOrder, updateUnfoldDiff } from '../store/actions';\r\nimport * as reorder from 'reorder.js';\r\n\r\nclass chart {\r\n    // 画布的宽高\r\n    width = 0;\r\n    height = 0;\r\n    // 外边距\r\n    margin = {\r\n        top: 10,\r\n        left: 30,\r\n        bottom: 20,\r\n        right: 10\r\n    };\r\n\r\n    svg = null;\r\n    // tooltip\r\n    tooltip = null;\r\n    topK = 10;\r\n    // 比例尺\r\n    // x = d3.scaleUtc()\r\n    x = d3.scaleLinear()\r\n    y = d3.scaleLinear()\r\n    color = d3.scaleLinear()\r\n    xAxis = null;\r\n    yAxis = null;\r\n    scaleUnit = d3.scaleLinear() //单元大小\r\n\r\n    //阈值\r\n    degreeThreshold = 0\r\n        //线生成器\r\n    line = d3.line()\r\n        .defined(d => !isNaN(d.sum))\r\n        .x(d => this.x(d.date))\r\n        .y(d => this.y(d.sum));\r\n    //刷选初始化\r\n    brush = d3.brushX();\r\n    //时间转换器\r\n    parseDate = d3.timeParse('%Y-%m-%d');\r\n    //msv\r\n\r\n    //dataset\r\n    dataset = 1\r\n\r\n        // dataset1\r\n            nodes = ['801010','801020','801030','801040','801050','801080','801110','801120','801130','801140','801150','801160',\r\n        '801170','801180','801200','801210','801230','801710','801720','801730','801740','801750','801760','801770','801780','801790'\r\n        ,'801880','801890'];\r\n\r\n        node_index = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27];\r\n        originNodeIndex =  [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27];\r\n    industry_index = {'801010':'农林牧渔','801020':'采掘','801030':'化工','801040':'钢铁','801050':'有色金属','801080':'电子',\r\n                       '801110':'家用电器','801120':'食品饮料','801130':'纺织服装','801140':'轻工制造','801150':'医药生物','801160':'公共事业',\r\n                        '801170':'交通运输','801180':'房地产' ,'801200':'商业贸易','801210':'休闲服务','801230':'综合','801710':'建筑材料',\r\n                        '801720':'建筑装饰','801730':'电气设备','801740':'国防军工','801750':'计算机','801760':'传媒','801770':'通信',\r\n                        '801780':'银行','801790':'非银金融','801880':'汽车','801890':'机械设备'}\r\n    industry_index2 = {'801010':'Ag','801020':'Mi','801030':'Ch','801040':'FM','801050':'NM','801080':'El',\r\n                       '801110':'HA','801120':'FB','801130':'TA','801140':'LM','801150':'HC','801160':'Ut',\r\n                        '801170':'Tr','801180':'RE' ,'801200':'Co','801210':'LS','801230':'Cl','801710':'CM',\r\n                        '801720':'CD','801730':'EE','801740':'De','801750':'Cp','801760':'Me','801770':'Te',\r\n                        '801780':'Ba','801790':'Fi','801880':'Car','801890':'ME'}\r\n\r\n    industry_index3 = {'801010':'Agriculture','801020':'Mining','801030':'Chemicals','801040':'Ferrous Metal','801050':'Nonferrous Metal','801080':'Electronics',\r\n                       '801110':'Household Appliances','801120':'Food & Beverage','801130':'Textile & Apparel','801140':'Light-industry Manufacturing','801150':'Health Care','801160':'Utilities',\r\n                        '801170':'Transportation','801180':'Real Estate' ,'801200':'Commerce','801210':'Leisure Service','801230':'Conglomerate','801710':'Construction Materials',\r\n                        '801720':'Construction Decoration','801730':'Electrical Equipment','801740':'Defense','801750':'Computer','801760':'Media','801770':'Telecommunication',\r\n                        '801780':'Bank','801790':'Financials','801880':'Car','801890':'Machinery Equipment'}\r\n\r\n\r\n    //配置\r\n    index_scale = d3.scaleOrdinal()\r\n    invert_index = d3.scaleOrdinal()\r\n    edges = [];\r\n    dayEdgeCount = {}; //每日边数，全联通的话边数相同；\r\n    days = []; //全部日期集合\r\n    unfoldDay = []; //展开的日期\r\n    dayLocation = []; //每天在视图中呈现的位置；\r\n    metrixUnit = 500; //每个矩阵的宽度占位\r\n    unit = 0;\r\n\r\n    slice_start = 2200;\r\n    slice_end = 2210;\r\n\r\n\r\n    nodelen = 0;\r\n    brushWidth = 0;\r\n    staTheight = 0;\r\n    staNwidth = 0\r\n\r\n\r\n    // 初始化\r\n    init(container, timeSpan, nodeOrder, dispatch) {\r\n        // this.node_index = nodeOrder;\r\n        this.index_scale.domain(this.nodes).range(this.node_index)\r\n        this.invert_index.domain(this.node_index).range(this.nodes)\r\n        this.nodelen = this.nodes.length\r\n\r\n        //长宽获取\r\n        this.width = container.clientWidth;\r\n        this.height = container.clientHeight;\r\n        //比例尺赋值\r\n        this.x.domain([0, this.edges.length])\r\n            .range([this.margin.left, this.width - this.margin.right])\r\n            //Y轴映射\r\n        this.y.domain([-0.5 - (this.nodelen * 0.15), this.nodelen - 0.5])\r\n            .range([this.margin.top, this.height - this.margin.bottom])\r\n\r\n        this.nodelen = this.nodes.length\r\n        this.staTheight = this.y(-1) - this.y(-0.5 - this.nodelen * 0.1) //辅助视图宽度\r\n        this.staNwidth = this.staTheight * 2\r\n\r\n        // //坐标轴赋值\r\n        this.yAxis = g => g\r\n            .attr(\"transform\", `translate(${this.margin.left},0)`)\r\n            .call(d3.axisLeft(this.y).ticks(this.nodes.length))\r\n            .call(g => g.select(\".domain\").remove())\r\n        this.xAxis = g => g\r\n            .attr(\"transform\", `translate(0,${this.height - this.margin.bottom})`)\r\n            .call(d3.axisBottom(this.x).ticks(this.width / 80).tickSizeOuter(0))\r\n            .call(g => g.select(\".domain\").remove())\r\n\r\n\r\n        //svg创建\r\n        this.svg = d3.select(container)\r\n            .append('svg')\r\n            .attr('width', this.width)\r\n            .attr('height', this.height)\r\n\r\n        //legend\r\n        this.drawColorLegendOuter()\r\n\r\n    }\r\n\r\n    // 更新数据，重绘视图\r\n    update(timeSpan, unfoldDay, unfoldDiff, nodeOrder, focusSpan, needOrder, threshold, maxmapping, orderweight, unfoldSwitch, msvSwitch, kelpSwitch, colorSwitch, dispatch) {\r\n            nodeOrder.forEach((item, i) => {\r\n                    this.node_index[item] = i\r\n                })\r\n                // this.node_index = nodeOrder;\r\n            this.index_scale = d3.scaleOrdinal().domain(this.nodes).range(this.node_index)\r\n            this.invert_index = d3.scaleOrdinal().domain(this.node_index).range(this.nodes)\r\n            this.degreeThreshold = (this.nodes.length - 2) * threshold * 0.01\r\n            let originInvertIndex = d3.scaleOrdinal().domain(this.originNodeIndex).range(this.nodes)\r\n            let nodelen = this.nodes.length\r\n            let maxmap = maxmapping * 0.01\r\n\r\n            //删除原有svg\r\n            d3.selectAll('rect.edge').remove();\r\n            d3.selectAll('rect.small').remove();\r\n            d3.selectAll('rect.metrix').remove();\r\n            d3.selectAll('circle.start').remove();\r\n            d3.selectAll('circle.end').remove();\r\n            d3.selectAll('circle.light').remove();\r\n            d3.selectAll('g.industry').remove();\r\n            d3.selectAll('g.high-level').remove();\r\n            d3.selectAll('.MSV').remove();\r\n            d3.selectAll('g.matrix').remove();\r\n            d3.selectAll('circle.origin').remove();\r\n            d3.selectAll('.stream').remove();\r\n            d3.selectAll('.kelp').remove();\r\n            d3.selectAll('.matrix').remove();\r\n            d3.selectAll('.staT').remove();\r\n            d3.selectAll('.staN').remove();\r\n            d3.selectAll('.brush').remove();\r\n            d3.selectAll('.industry').remove();\r\n            d3.selectAll('.timelabel').remove();\r\n\r\n\r\n \r\n\r\n            //数据\r\n            let data = JSON.parse(JSON.stringify(originData));\r\n            let mdata = JSON.parse(JSON.stringify(metrixOriginData));\r\n            let diffdata = JSON.parse(JSON.stringify(metrixDiffData));\r\n            let hdata = JSON.parse(JSON.stringify(highMatrix));\r\n            console.log(hdata.length, data.length,hdata[1111])\r\n            if (timeSpan[0] !== 'start') {\r\n                this.slice_start = timeSpan[0]\r\n                this.slice_end = timeSpan[1]\r\n            }\r\n            data = data.slice(this.slice_start, this.slice_end)\r\n            hdata = hdata.slice(this.slice_start, this.slice_end)\r\n\r\n            let highData = data //顶层数据\r\n            let newData = {}\r\n            this.days = []\r\n            this.dayEdgeCount = {}\r\n            let all_edges_count = 0\r\n                //生成node info\r\n            let node_info = {}\r\n            this.nodes.forEach((node) => {\r\n                //为每个node生成一个对象\r\n                node_info[node] = {\r\n                    'id': node,\r\n                    'total_degree': 0,\r\n                    'total_posdegree': 0,\r\n                    'total_negdegree': 0,\r\n                    'total_pos_value': 0,\r\n                    'total_neg_value': 0,\r\n                    'max_value': 0,\r\n                    \"min_value\": 0,\r\n                    'max_posdegree': 0,\r\n                    \"max_negdegree\": 0,\r\n                    'posdistribution': [],\r\n                    \"negdistribution\": [],\r\n                    \"posfrequency\": new Array(nodelen).fill(0),\r\n                    \"negfrequency\": new Array(nodelen).fill(0),\r\n                    \"maxStrength2\": 0,\r\n                }\r\n            })\r\n\r\n            data.forEach(element => {\r\n                let newLink = [];\r\n                element.nodes.forEach((node) => {\r\n                    //修改nodeinfo\r\n                    node_info[node.id] = {\r\n                        ...node_info[node.id],\r\n                        'total_degree': node_info[node.id]['total_degree'] + node.degree,\r\n                        'total_posdegree': node_info[node.id]['total_posdegree'] + node.posdegree,\r\n                        'total_negdegree': node_info[node.id]['total_negdegree'] + node.negdegree,\r\n                        'total_pos_value': node_info[node.id]['total_pos_value'] + node.posvalue,\r\n                        'total_neg_value': node_info[node.id]['total_neg_value'] + node.negvalue,\r\n                        'max_value': Math.max(node_info[node.id]['max_value'], node.posvalue),\r\n                        \"min_value\": Math.min(node_info[node.id]['min_value'], node.negvalue),\r\n                        'max_posdegree': Math.max(node_info[node.id]['max_posdegree'], node.posdegree),\r\n                        \"max_negdegree\": Math.max(node_info[node.id]['max_negdegree'], node.negdegree),\r\n                        'posdistribution': [...node_info[node.id]['posdistribution'], node.posdegree],\r\n                        \"negdistribution\": [...node_info[node.id]['negdistribution'], node.negdegree],\r\n                        \"maxStrength2\": Math.max(node_info[node.id]['maxStrength2'], node.strength2),\r\n                    }\r\n                    if (node.posdegree !== 0) {\r\n                        node_info[node.id]['posfrequency'][node.posdegree] = node_info[node.id]['posfrequency'][node.posdegree] + 1;\r\n                    }\r\n                    if (node.negdegree !== 0) {\r\n                        node_info[node.id]['negfrequency'][node.negdegree] = node_info[node.id]['negfrequency'][node.negdegree] + 1;\r\n                    }\r\n\r\n                })\r\n                this.days.push(element.date)\r\n            });\r\n\r\n            //重新排序节点\r\n            if (needOrder) {\r\n                //矩阵转化\r\n                let MatrixSet = []\r\n                unfoldDay.forEach((item) => {\r\n                        if (unfoldDiff.includes(item)) {\r\n                            let matrix = diffdata.filter(({ date }) => date === item)[0].cell\r\n                            MatrixSet.push(matrix)\r\n                        } else {\r\n                            let matrix = mdata.filter(({ date }) => date === item)[0].cell\r\n                            MatrixSet.push(matrix)\r\n                        }\r\n                    })\r\n                    //排序并修改顺序\r\n                let WeightedOrder = this.reorder4Weight(hdata, nodelen, MatrixSet, orderweight)\r\n                dispatch(updateNodeOrder(WeightedOrder))\r\n            }\r\n\r\n\r\n            //重新计算边位置\r\n\r\n            //重新计算location\r\n            //计算让矩阵方形的宽度\r\n            let y = this.y\r\n\r\n            let staTheight = y(-1) - y(-0.5 - nodelen * 0.15) //辅助视图宽度\r\n            let staNwidth = staTheight\r\n\r\n            let unit = ((this.width - this.margin.left - this.margin.right - staNwidth) - (unfoldDay.length * (y(nodelen) - y(0)))) / this.days.length\r\n            let matrix_width = ((y(nodelen) - y(0)) / unit)\r\n            this.dayLocation = []\r\n            let location = {}\r\n            let count = 0;\r\n            this.days.forEach(day => {\r\n                if (unfoldDay.includes(day)) {\r\n                    this.dayLocation.push({\r\n                        date: day,\r\n                        location: count,\r\n                    });\r\n                    location[day] = count;\r\n                    count = count + matrix_width + 1;\r\n                } else {\r\n                    this.dayLocation.push({\r\n                        date: day,\r\n                        location: count,\r\n                        // edges:newData[day]\r\n                    });\r\n                    location[day] = count;\r\n                    count = count + 1;\r\n                }\r\n            })\r\n\r\n\r\n\r\n            //修改比例尺\r\n            let degreeThreshold = this.degreeThreshold\r\n            let max = Math.max(...Object.values(node_info).map(item => item.max_value))\r\n            let min = Math.min(...Object.values(node_info).map(item => item.min_value))\r\n            let weightmax = Math.max(...Object.values(node_info).map(item => item.maxStrength2))\r\n            let weightThreshold = threshold * 0.01 * weightmax\r\n            let color = d3.scaleLinear().domain([min, 0.3 * min, 0, max * 0.3, max])\r\n                .range(['#5389c0', '#82a9d1', 'white', '#E09585', '#d2664f']);  \r\n            let posgray = \"#f5dcd6\",\r\n                   neggray = \"#d4e2ef\";   // #dfebec #f5dcd6\r\n              \r\n            let posrect = \" #E09585\",\r\n                negrect = \"#82a9d1\";   // #B1CDD0 #E09585 #6b9ac9 #b6cde4       #82a9d1 #d4e2ef   #e3edee  #99bec2 #c9dcde\r\n            let index_scale = this.index_scale;\r\n            let length = nodelen;\r\n            let T = this.days.length\r\n                //绘制High level\r\n\r\n            let highScale = d3.scaleLinear().domain([0, count]).range([this.margin.left + staNwidth, this.width - this.margin.right]);\r\n            let nodeScale = d3.scaleLinear().domain([0, maxmap * length - 1]).range([0, (y(1) - y(0)) / 2])\r\n\r\n            let mcolor = d3.scaleLinear()\r\n            if (this.dataset === 1) {\r\n                //dataset1 #3e403f #2e4c6d #fed9a6\r\n                mcolor.domain([0.5, 1]).range(['white', '#3e403f'])\r\n            } else if (this.dataset === 3) {\r\n\r\n                //dataset3\r\n                mcolor.domain([0, 10]).range(['white', '#3e403f'])\r\n            }\r\n\r\n\r\n            //绘制视图\r\n            //绘制辅助线条纹背景\r\n            let nodeline = new Array(this.nodes.length).fill(0).map((d, i) => i).filter(d => d % 2 === 0)\r\n            this.svg.selectAll('reck.nodeline')\r\n                .data(nodeline)\r\n                .join('rect')\r\n                .classed('nodeline', true)\r\n                .attr('x', this.margin.left + staNwidth)\r\n                .attr('y', (d, i) => this.y(d - 0.5))\r\n                .attr('width', this.width - this.margin.right - this.margin.left - staNwidth)\r\n                .attr('height', this.y(1) - this.y(0))\r\n                .attr('fill', '#f1f3f5')\r\n            this.svg.selectAll('reck.nodeline0')\r\n                .data(nodeline)\r\n                .join('rect')\r\n                .classed('nodeline0', true)\r\n                .attr('x', 0)\r\n                .attr('y', (d, i) => this.y(d - 0.5))\r\n                .attr('width', staNwidth)\r\n                .attr('height', this.y(1) - this.y(0))\r\n                .attr('fill', '#f1f3f5')\r\n            this.svg.selectAll('reck.nodeline1')\r\n                .data(nodeline)\r\n                .join('rect')\r\n                .classed('nodeline1', true)\r\n                .attr('x', staNwidth+3)\r\n                .attr('y', (d, i) => this.y(d - 0.5))\r\n                .attr('width', this.margin.left-6)\r\n                .attr('height', this.y(1) - this.y(0))\r\n                .attr('fill', '#f1f3f5')\r\n\r\n           //y轴 标签\r\n            if (this.dataset === 1) {\r\n                let industry = this.industry_index2\r\n                this.svg.append('g').attr('class', 'industry')\r\n                    .selectAll(\"text.industry\")\r\n                    .data(this.node_index)\r\n                    .join(\"text\").classed('industry',true)\r\n                    .attr('y', (d, i) => (this.y(d+0.2)))\r\n                    .attr('x', staNwidth + 5 )\r\n                    .text((d,i)=> industry[originInvertIndex(i)])\r\n                    // .text((d, i) => originInvertIndex(i))\r\n                    .attr('font-size', 12)\r\n            } else if (this.dataset === 3) {\r\n                let industry = this.industry_index\r\n                this.svg.append('g').attr('class', 'industry')\r\n                    .selectAll(\"text.industry\")\r\n                    .data(this.node_index)\r\n                    .join(\"text\").classed('industry',true)\r\n                    .attr('y', (d, i) => (this.y(d)))\r\n                    .attr('x', staNwidth + 5)\r\n                    .text((d, i) => industry[originInvertIndex(i)])\r\n                    // .text((d,i)=> originInvertIndex(i))\r\n                    .attr('font-size', 15)\r\n            }\r\n                //绘制时间\r\n            let timelabels = [0, parseInt(T * 0.2), parseInt(T * 0.4), parseInt(T * 0.6), parseInt(T * 0.8)]\r\n            this.svg.selectAll('text.timelabel').data(timelabels)\r\n                .join('text').classed('timelabel', true)\r\n                .attr('y', (d, i) => (this.y(-0.9)))\r\n                .attr('x', d => {\r\n                    return highScale(location[this.days[d]])\r\n                })\r\n                .text((d, i) => this.days[d])\r\n                .attr('font-size', 13)\r\n\r\n            //绘制辅助视图\r\n            //横向直方图\r\n            let staTscale = d3.scaleLinear().domain([maxmap * maxmap * nodelen * (nodelen - 1) / 2, 0]).range([y(-0.5 - nodelen * 0.15), y(-1.5)])\r\n            this.svg.append('rect')\r\n                        .classed('staT', true)\r\n                        .attr('x', highScale(0))\r\n                        .attr('y', y(-0.5 - nodelen * 0.15))\r\n                        .attr('width', (highScale(count) - highScale(0)))\r\n                        .attr('height', y(-1.5)-y(-0.5 - nodelen * 0.15))\r\n                        .attr('fill', '#f1f3f5')\r\n            this.svg.selectAll('g.staT')\r\n                .data(highData)\r\n                .join('g').classed('staT', true)\r\n                .each(function(ddd, index) {\r\n\r\n                    let day_index = location[ddd.date]\r\n                        //正边数量\r\n                    d3.select(this).append('rect')\r\n                        .classed('staT', true)\r\n                        .attr('x', highScale(day_index))\r\n                        .attr('y', staTscale(ddd.totalPosEdge+ddd.totalNegEdge))\r\n                        .attr('width', (highScale(1) - highScale(0)))\r\n                        .attr('height', staTscale(0) - staTscale(ddd.totalPosEdge))\r\n                        .attr('fill', posrect)\r\n                        //负边数量\r\n                    d3.select(this).append('rect')\r\n                        .classed('staT', true)\r\n                        .attr('x', highScale(day_index))\r\n                        .attr('y', staTscale(ddd.totalNegEdge))\r\n                        .attr('width', (highScale(1) - highScale(0)))\r\n                        .attr('height', staTscale(0) - staTscale(ddd.totalNegEdge))\r\n                        .attr('fill', negrect)\r\n                })\r\n                //分布图\r\n            let staNscale1 = d3.scaleLinear().domain([0, (nodelen - 1)]).range([staNwidth * 0.5, staNwidth * 0.9])\r\n            let staNscale2 = d3.scaleLinear().domain([(nodelen - 1), 0]).range([staNwidth * 0.1, staNwidth * 0.5])\r\n            let staNdata = Object.values(node_info)\r\n            let maxFre = 0\r\n            staNdata.forEach(item => {\r\n                maxFre = Math.max(maxFre, Math.max(...item.negfrequency), Math.max(...item.posfrequency))\r\n            })\r\n            this.svg.selectAll('g.staN')\r\n                .data(staNdata)\r\n                .join('g').classed('staN', true)\r\n                .each(function(ddd, index) {\r\n                    let localY = d3.scaleLinear().domain([0, maxFre]).range([y(index_scale(ddd.id) + 0.4), y(index_scale(ddd.id) - 0.7)])\r\n\r\n                    // A area generator, for the dark stroke.\r\n                    let area1 = d3.area()\r\n                        .x(function(d, i) { return staNscale1(i); })\r\n                        .y1(function(d, i) { return localY(d); })\r\n                        .y0(localY(0))\r\n                        .curve(d3.curveBasis)\r\n                    let area2 = d3.area()\r\n                        .x(function(d, i) { return staNscale2(i); })\r\n                        .y1(function(d) { return localY(d); })\r\n                        .y0(localY(0))\r\n                        .curve(d3.curveBasis)\r\n\r\n                    // Plot the area\r\n                    d3.select(this).append(\"path\")\r\n                        .attr(\"class\", \"mypath\")\r\n                        .datum(ddd.posfrequency)\r\n                        .attr(\"fill\", posrect)\r\n                        .attr(\"opacity\", \"1\")\r\n                        .attr(\"stroke-linejoin\", \"round\")\r\n                        .attr(\"d\", area1)\r\n                    d3.select(this).append(\"path\")\r\n                        .attr(\"class\", \"mypath\")\r\n                        .datum(ddd.negfrequency)\r\n                        .attr(\"fill\", negrect)\r\n                        .attr(\"opacity\", \"1\")\r\n                        .attr(\"stroke-linejoin\", \"round\")\r\n                        .attr(\"d\", area2)\r\n                })\r\n\r\n\r\n            //绘制kelp diagram\r\n            let Vgap = y(1) - y(0),\r\n                Hgap = highScale(1) - highScale(0);\r\n            if (kelpSwitch) {\r\n                let posline = [];\r\n                let negline = [];\r\n                let negPath = [];\r\n                let posPath = [];\r\n                if (colorSwitch) {\r\n                    let kelpCenterData = highData.filter((item, index) => {\r\n                        return item.nodes.filter(({ strength2 }) => strength2 > weightThreshold).length > 0;\r\n                    })\r\n                    kelpCenterData.forEach((item, index) => {\r\n                            let set = item.nodes.filter(({ strength2 }) => strength2 > weightThreshold).sort((a, b) => index_scale(a.id) - index_scale(b.id))\r\n                            let posbridgeSet = set.filter((node) => node.type2 === \"pos\").sort((a, b) => index_scale(a.id) - index_scale(b.id));\r\n                            let bridgeSet = set.filter((node) => node.type2 === 'neg').sort((a, b) => index_scale(a.id) - index_scale(b.id));\r\n\r\n                            //绘制posbridge\r\n                            let posbridgeLen = posbridgeSet.length;\r\n                            if (posbridgeLen > 0) {\r\n                                // if(!msvSwitch){\r\n                                posbridgeSet.forEach((node, i) => {\r\n                                    posPath.push({\r\n                                        date: item.date,\r\n                                        d: `M ${highScale(location[item.date]+0.9)},${y(index_scale(node.id)-0.4)} A${Hgap*0.4},${Vgap*0.1} 0 0,0 ${highScale(location[item.date])},${y(index_scale(node.id)-0.4)} v${Vgap*0.8} A${Hgap*0.4},${Vgap*0.1} 0 0,0 ${highScale(location[item.date]+0.9)},${y(index_scale(node.id)+0.4)} z`\r\n                                    })\r\n                                })\r\n                                posPath.push({\r\n                                        date: item.date,\r\n                                        d: `M ${highScale(location[item.date])},${y(index_scale(posbridgeSet[0].id))} h${Hgap*0.2} L ${highScale(location[item.date]+0.2)},${y(index_scale(posbridgeSet[posbridgeLen-1].id))} h${-Hgap*0.2} z`\r\n                                    })\r\n                                    // }\r\n\r\n                            }\r\n\r\n                            //绘制bridge\r\n                            let bridgeLen = bridgeSet.length;\r\n                            if (bridgeLen > 0) {\r\n                                // if(!msvSwitch){\r\n                                bridgeSet.forEach((node, i) => {\r\n                                    negPath.push({\r\n                                        date: item.date,\r\n                                        d: `M ${highScale(location[item.date]+1)},${y(index_scale(node.id)-0.4)} A${Hgap*0.4},${Vgap*0.1} 0 0,0 ${highScale(location[item.date]+0.1)},${y(index_scale(node.id)-0.4)} v${Vgap*0.8} A${Hgap*0.4},${Vgap*0.1} 0 0,0 ${highScale(location[item.date]+1)},${y(index_scale(node.id)+0.4)} z`\r\n                                    })\r\n                                })\r\n                                negPath.push({\r\n                                        date: item.date,\r\n                                        d: `M ${highScale(location[item.date]+0.8)},${y(index_scale(bridgeSet[0].id))} h${Hgap*0.2} L ${highScale(location[item.date]+1)},${y(index_scale(bridgeSet[bridgeLen-1].id))} h${-Hgap*0.2} z`\r\n                                    })\r\n                                    // }\r\n\r\n                            }\r\n                        })\r\n                        //计算两天之间的连接\r\n                    for (let i = 0; i < kelpCenterData.length - 1; i++) {\r\n                        let distance = (location[kelpCenterData[i + 1].date] - location[kelpCenterData[i].date])\r\n                        if (distance > 0 && distance < 10) {\r\n                            let set1 = kelpCenterData[i].nodes.filter(({ strength2 }) => strength2 > weightThreshold).sort((a, b) => index_scale(a.id) - index_scale(b.id))\r\n                            let set2 = kelpCenterData[i + 1].nodes.filter(({ strength2 }) => strength2 > weightThreshold).sort((a, b) => index_scale(a.id) - index_scale(b.id))\r\n                            let posNodes1 = set1.filter((node) => node.type2 === 'pos') //左边绿的\r\n                            let negNodes1 = set1.filter((node) => node.type2 === 'neg') //左边红的\r\n                            let posNodes2 = set2.filter((node) => node.type2 === 'pos') //右边绿的\r\n                            let negNodes2 = set2.filter((node) => node.type2 === 'neg') //右边红的\r\n\r\n\r\n                            let ifOverlap = false //是否有重叠\r\n                            let posEdge = [],\r\n                                negEdge = []; //红边绿边\r\n                            set1.forEach((a) => {\r\n                                    let set2Has = set2.forEach((b) => {\r\n                                        let Has = a.id === b.id;\r\n                                        if (Has) { //如果重叠了\r\n                                            ifOverlap = true;\r\n                                            let active1 = a.type2 === 'pos' ? true : false;\r\n                                            let active2 = b.type2 === 'pos' ? true : false;\r\n\r\n\r\n                                            if (active1 && active2) { //都是绿的连粗的绿的\r\n                                                posPath.push({\r\n                                                    date1: kelpCenterData[i].date,\r\n                                                    date2: kelpCenterData[i + 1].date,\r\n                                                    d: `M ${highScale(location[kelpCenterData[i].date]+0.5)},${y(index_scale(a.id)-0.3)} v${Vgap*0.6} L ${highScale(location[kelpCenterData[i+1].date]+0.5)},${y(index_scale(b.id)+0.3)} v${-Vgap*0.6} z`\r\n                                                })\r\n                                                posEdge.push(a); //绿边放进来\r\n                                            } else if (!active1 && !active2) { //都是红的连粗的红的\r\n                                                negPath.push({\r\n                                                    date1: kelpCenterData[i].date,\r\n                                                    date2: kelpCenterData[i + 1].date,\r\n                                                    d: `M ${highScale(location[kelpCenterData[i].date]+0.5)},${y(index_scale(a.id)-0.3)} v${Vgap*0.6} L ${highScale(location[kelpCenterData[i+1].date]+0.5)},${y(index_scale(b.id)+0.3)} v${-Vgap*0.6} z`\r\n                                                })\r\n                                                negEdge.push(a) //红边放进来\r\n\r\n                                            } else { //左右颜色不一样\r\n                                                if (posNodes1.length > 0 && posNodes2.length > 0) { //如果左右都有绿的\r\n                                                    posPath.push({\r\n                                                        date1: kelpCenterData[i].date,\r\n                                                        date2: kelpCenterData[i + 1].date,\r\n                                                        d: `M ${highScale(location[kelpCenterData[i].date]+0.8)},${y(index_scale(a.id)-0.3)} v${Vgap*0.3} L ${highScale(location[kelpCenterData[i+1].date]+0.2)},${y(index_scale(b.id))} v${-Vgap*0.3} z`\r\n                                                    })\r\n                                                    posEdge.push(a); //绿边放进来\r\n                                                }\r\n                                                if (negNodes1.length > 0 && negNodes2.length > 0) {\r\n                                                    negPath.push({\r\n                                                        date1: kelpCenterData[i].date,\r\n                                                        date2: kelpCenterData[i + 1].date,\r\n                                                        d: `M ${highScale(location[kelpCenterData[i].date]+0.8)},${y(index_scale(a.id))} v${Vgap*0.3} L ${highScale(location[kelpCenterData[i+1].date]+0.2)},${y(index_scale(b.id)+0.3)} v${-Vgap*0.3} z`\r\n                                                    })\r\n                                                    negEdge.push(a) //红边放进来\r\n                                                }\r\n                                            }\r\n\r\n\r\n                                        }\r\n                                    })\r\n                                    return set2Has\r\n                                })\r\n                                //有重叠连线\r\n\r\n                            let negMix = [...negEdge, ...negNodes1].sort((a, b) => index_scale(a.id) - index_scale(b.id));\r\n                            if (negEdge.length > 0) {\r\n                                negPath.push({\r\n                                    date: kelpCenterData[i].date,\r\n                                    d: `M ${highScale(location[kelpCenterData[i].date]+0.8)},${y(index_scale(negMix[0].id))} h${Hgap*0.2} L ${highScale(location[kelpCenterData[i].date]+1)},${y(index_scale(negMix[negMix.length-1].id))} h${-Hgap*0.2} z`\r\n                                })\r\n                            }\r\n                            let posMix = [...posEdge, ...posNodes2].sort((a, b) => index_scale(a.id) - index_scale(b.id));\r\n                            if (posEdge.length > 0) {\r\n                                posPath.push({\r\n                                    date: kelpCenterData[i + 1].date,\r\n                                    d: `M ${highScale(location[kelpCenterData[i+1].date])},${y(index_scale(posMix[0].id))} h${Hgap*0.2} L ${highScale(location[kelpCenterData[i+1].date]+0.2)},${y(index_scale(posMix[posMix.length-1].id))} h${-Hgap*0.2} z`\r\n                                })\r\n                            }\r\n\r\n\r\n\r\n                            if (!ifOverlap) { //没有重叠\r\n                                if (posNodes1.length > 0 && posNodes2.length > 0) { //左右都有绿色\r\n                                    let initpos = [0, 0]\r\n                                    let maxdist = nodelen - 1;\r\n                                    for (let index1 = 0; index1 < posNodes1.length; index1++) {\r\n                                        if (maxdist < 2) {\r\n                                            break;\r\n                                        }\r\n                                        for (let index2 = 0; index2 < posNodes2.length; index2++) {\r\n                                            let dist = Math.abs(index_scale(posNodes1[index1].id) - index_scale(posNodes2[index2].id))\r\n                                            if (dist < 2) {\r\n                                                maxdist = dist;\r\n                                                initpos = [index1, index2];\r\n                                                break;\r\n                                            } else if (dist < maxdist) {\r\n                                                maxdist = dist\r\n                                                initpos = [index1, index2];\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    if (index_scale(posNodes1[initpos[0]].id) > index_scale(posNodes2[initpos[1]].id)) {\r\n                                        posline.push({\r\n                                            date1: kelpCenterData[i].date,\r\n                                            date2: kelpCenterData[i + 1].date,\r\n                                            x1: highScale(location[kelpCenterData[i].date] + 0.7),\r\n                                            x2: highScale(location[kelpCenterData[i + 1].date] + 0.1),\r\n                                            y1: y(index_scale(posNodes1[initpos[0]].id) - 0.3),\r\n                                            y2: y(index_scale(posNodes2[initpos[1]].id) + 0.3),\r\n                                        })\r\n                                    } else {\r\n                                        posline.push({\r\n                                            date1: kelpCenterData[i].date,\r\n                                            date2: kelpCenterData[i + 1].date,\r\n                                            x1: highScale(location[kelpCenterData[i].date] + 0.7),\r\n                                            x2: highScale(location[kelpCenterData[i + 1].date] + 0.1),\r\n                                            y1: y(index_scale(posNodes1[initpos[0]].id) + 0.3),\r\n                                            y2: y(index_scale(posNodes2[initpos[1]].id) - 0.3),\r\n                                        })\r\n                                    }\r\n\r\n                                }\r\n\r\n                                if (negNodes1.length > 0 && negNodes2.length > 0) { //左右都有红色\r\n                                    let initpos = [0, 0]\r\n                                    let maxdist = nodelen - 1;\r\n                                    for (let index1 = 0; index1 < negNodes1.length; index1++) {\r\n                                        if (maxdist < 2) {\r\n                                            break;\r\n                                        }\r\n                                        for (let index2 = 0; index2 < negNodes2.length; index2++) {\r\n                                            let dist = Math.abs(index_scale(negNodes1[index1].id) - index_scale(negNodes2[index2].id))\r\n                                            if (dist < 2) {\r\n                                                maxdist = dist;\r\n                                                initpos = [index1, index2];\r\n                                                break;\r\n                                            } else if (dist < maxdist) {\r\n                                                maxdist = dist\r\n                                                initpos = [index1, index2];\r\n                                            }\r\n                                        }\r\n                                    }\r\n\r\n                                    if (index_scale(negNodes1[initpos[0]].id) > index_scale(negNodes2[initpos[1]].id)) {\r\n                                        negline.push({\r\n                                            date1: kelpCenterData[i].date,\r\n                                            date2: kelpCenterData[i + 1].date,\r\n                                            x1: highScale(location[kelpCenterData[i].date] + 0.9),\r\n                                            x2: highScale(location[kelpCenterData[i + 1].date] + 0.3),\r\n                                            y1: y(index_scale(negNodes1[initpos[0]].id) - 0.3),\r\n                                            y2: y(index_scale(negNodes2[initpos[1]].id) + 0.3),\r\n                                        })\r\n                                    } else {\r\n                                        negline.push({\r\n                                            date1: kelpCenterData[i].date,\r\n                                            date2: kelpCenterData[i + 1].date,\r\n                                            x1: highScale(location[kelpCenterData[i].date] + 0.9),\r\n                                            x2: highScale(location[kelpCenterData[i + 1].date] + 0.3),\r\n                                            y1: y(index_scale(negNodes1[initpos[0]].id) + 0.3),\r\n                                            y2: y(index_scale(negNodes2[initpos[1]].id) - 0.3),\r\n                                        })\r\n                                    }\r\n\r\n\r\n                                }\r\n\r\n                            }\r\n                        }\r\n\r\n\r\n                    }\r\n                    let kelpOpacity = 1\r\n                        //posline\r\n                    this.svg.selectAll('line.posline')\r\n                        .data(posline)\r\n                        .join('line')\r\n                        .classed('kelp', true)\r\n                        .classed('posline', true)\r\n                        .attr('x1', d => d.x1)\r\n                        .attr('y1', d => d.y1)\r\n                        .attr('x2', d => d.x2)\r\n                        .attr('y2', d => d.y2)\r\n                        .attr('stroke', msvSwitch ? posgray : posrect)\r\n                        .attr('stroke-width', Math.min(Hgap, Vgap) * 0.2)\r\n                        .attr('opacity', kelpOpacity)\r\n                        //negline\r\n                    this.svg.selectAll('line.negline')\r\n                        .data(negline)\r\n                        .join('line')\r\n                        .classed('kelp', true)\r\n                        .classed('negline', true)\r\n                        .attr('x1', d => d.x1)\r\n                        .attr('y1', d => d.y1)\r\n                        .attr('x2', d => d.x2)\r\n                        .attr('y2', d => d.y2)\r\n                        .attr('stroke', msvSwitch ? neggray : negrect)\r\n                        .attr('stroke-width', Math.min(Hgap, Vgap) * 0.2)\r\n                        .attr('opacity', kelpOpacity)\r\n                        //neg-path\r\n                    this.svg.selectAll('path.kelpnp')\r\n                        .data(negPath)\r\n                        .join('path')\r\n                        .classed('kelp', true)\r\n                        .classed('kelpnp', true)\r\n                        .attr('d', d => d.d)\r\n                        .attr('fill', msvSwitch ? neggray : negrect)\r\n                        .attr('opacity', kelpOpacity)\r\n                        .attr(\"stroke-width\", 1)\r\n                        //pos-path\r\n                    this.svg.selectAll('path.kelppp')\r\n                        .data(posPath)\r\n                        .join('path')\r\n                        .classed('kelp', true)\r\n                        .classed('kelppp', true)\r\n                        .attr('d', d => d.d)\r\n                        .attr('fill', msvSwitch ? posgray : posrect)\r\n                        .attr('opacity', kelpOpacity)\r\n\r\n                    //绘制光圈\r\n                    if (!msvSwitch) {\r\n                        let lightData = []\r\n                        let lightStream = kelpCenterData\r\n                        lightStream.forEach((item => {\r\n                            item.nodes.filter(item => item.strength2 > weightThreshold).forEach((node) => {\r\n                                lightData.push({\r\n                                    id: node.id,\r\n                                    color: node.totalposvalue - Math.abs(node.totalnegvalue) >= 0 ? '#d2664f' : '#5389c0',\r\n                                    date: item.date,\r\n                                })\r\n                            })\r\n                        }))\r\n                        this.svg.selectAll('circle.light')\r\n                            .data(lightData)\r\n                            .join('circle')\r\n                            .classed('light', true)\r\n                            .attr('cx', d => highScale(location[d.date] + 0.5))\r\n                            .attr('cy', d => (y(index_scale(d.id))))\r\n                            .attr('r', Math.min(Hgap, Vgap) * 0.2)\r\n                            .attr('fill', d => d.color)\r\n                            .attr('opacity', kelpOpacity)\r\n                    }\r\n                } else {\r\n                    let kelpCenterData = highData.filter((item, index) => {\r\n                        return item.nodes.filter(({ strength }) => strength > degreeThreshold).length > 0;\r\n                    })\r\n                    kelpCenterData.forEach((item, index) => {\r\n                            let set = item.nodes.filter(({ strength }) => strength > degreeThreshold).sort((a, b) => index_scale(a.id) - index_scale(b.id))\r\n                            let posbridgeSet = set.filter((node) => node.type === \"pos\").sort((a, b) => index_scale(a.id) - index_scale(b.id));\r\n                            let bridgeSet = set.filter((node) => node.type === 'neg').sort((a, b) => index_scale(a.id) - index_scale(b.id));\r\n\r\n                            //绘制posbridge\r\n                            let posbridgeLen = posbridgeSet.length;\r\n                            if (posbridgeLen > 0) {\r\n                                // if(!msvSwitch){\r\n                                posbridgeSet.forEach((node, i) => {\r\n                                    posPath.push({\r\n                                        date: item.date,\r\n                                        d: `M ${highScale(location[item.date]+0.9)},${y(index_scale(node.id)-0.4)} A${Hgap*0.4},${Vgap*0.1} 0 0,0 ${highScale(location[item.date])},${y(index_scale(node.id)-0.4)} v${Vgap*0.8} A${Hgap*0.4},${Vgap*0.1} 0 0,0 ${highScale(location[item.date]+0.9)},${y(index_scale(node.id)+0.4)} z`\r\n                                    })\r\n                                })\r\n                                posPath.push({\r\n                                        date: item.date,\r\n                                        d: `M ${highScale(location[item.date])},${y(index_scale(posbridgeSet[0].id))} h${Hgap*0.2} L ${highScale(location[item.date]+0.2)},${y(index_scale(posbridgeSet[posbridgeLen-1].id))} h${-Hgap*0.2} z`\r\n                                    })\r\n                                    // }\r\n\r\n                            }\r\n\r\n                            //绘制bridge\r\n                            let bridgeLen = bridgeSet.length;\r\n                            if (bridgeLen > 0) {\r\n                                // if(!msvSwitch){\r\n                                bridgeSet.forEach((node, i) => {\r\n                                    negPath.push({\r\n                                        date: item.date,\r\n                                        d: `M ${highScale(location[item.date]+1)},${y(index_scale(node.id)-0.4)} A${Hgap*0.4},${Vgap*0.1} 0 0,0 ${highScale(location[item.date]+0.1)},${y(index_scale(node.id)-0.4)} v${Vgap*0.8} A${Hgap*0.4},${Vgap*0.1} 0 0,0 ${highScale(location[item.date]+1)},${y(index_scale(node.id)+0.4)} z`\r\n                                    })\r\n                                })\r\n                                negPath.push({\r\n                                        date: item.date,\r\n                                        d: `M ${highScale(location[item.date]+0.8)},${y(index_scale(bridgeSet[0].id))} h${Hgap*0.2} L ${highScale(location[item.date]+1)},${y(index_scale(bridgeSet[bridgeLen-1].id))} h${-Hgap*0.2} z`\r\n                                    })\r\n                                    // }\r\n\r\n                            }\r\n                        })\r\n                        //计算两天之间的连接\r\n                    for (let i = 0; i < kelpCenterData.length - 1; i++) {\r\n                        let distance = (location[kelpCenterData[i + 1].date] - location[kelpCenterData[i].date])\r\n                        if (distance > 0 && distance < 15) {\r\n                            let set1 = kelpCenterData[i].nodes.filter(({ strength }) => strength > degreeThreshold).sort((a, b) => index_scale(a.id) - index_scale(b.id))\r\n                            let set2 = kelpCenterData[i + 1].nodes.filter(({ strength }) => strength > degreeThreshold).sort((a, b) => index_scale(a.id) - index_scale(b.id))\r\n                            let posNodes1 = set1.filter((node) => node.type === 'pos') //左边绿的\r\n                            let negNodes1 = set1.filter((node) => node.type === 'neg') //左边红的\r\n                            let posNodes2 = set2.filter((node) => node.type === 'pos') //右边绿的\r\n                            let negNodes2 = set2.filter((node) => node.type === 'neg') //右边红的\r\n\r\n                            let ifOverlap = false //是否有重叠\r\n                            let posEdge = [],\r\n                                negEdge = []; //红边绿边\r\n                            set1.forEach((a) => {\r\n                                    let set2Has = set2.forEach((b) => {\r\n                                        let Has = a.id === b.id;\r\n                                        if (Has) { //如果重叠了\r\n                                            ifOverlap = true;\r\n                                            let active1 = a.type === 'pos' ? true : false;\r\n                                            let active2 = b.type === 'pos' ? true : false;\r\n\r\n                                            if (active1 && active2) { //都是绿的连粗的绿的\r\n                                                posPath.push({\r\n                                                    date1: kelpCenterData[i].date,\r\n                                                    date2: kelpCenterData[i + 1].date,\r\n                                                    d: `M ${highScale(location[kelpCenterData[i].date]+0.5)},${y(index_scale(a.id)-0.3)} v${Vgap*0.6} L ${highScale(location[kelpCenterData[i+1].date]+0.5)},${y(index_scale(b.id)+0.3)} v${-Vgap*0.6} z`\r\n                                                })\r\n                                                posEdge.push(a); //绿边放进来\r\n                                            } else if (!active1 && !active2) { //都是红的连粗的红的\r\n                                                negPath.push({\r\n                                                    date1: kelpCenterData[i].date,\r\n                                                    date2: kelpCenterData[i + 1].date,\r\n                                                    d: `M ${highScale(location[kelpCenterData[i].date]+0.5)},${y(index_scale(a.id)-0.3)} v${Vgap*0.6} L ${highScale(location[kelpCenterData[i+1].date]+0.5)},${y(index_scale(b.id)+0.3)} v${-Vgap*0.6} z`\r\n                                                })\r\n                                                negEdge.push(a) //红边放进来\r\n\r\n                                            } else { //左右颜色不一样\r\n                                                if (posNodes1.length > 0 && posNodes2.length > 0) { //如果左右都有绿的\r\n                                                    posPath.push({\r\n                                                        date1: kelpCenterData[i].date,\r\n                                                        date2: kelpCenterData[i + 1].date,\r\n                                                        d: `M ${highScale(location[kelpCenterData[i].date]+0.8)},${y(index_scale(a.id)-0.3)} v${Vgap*0.3} L ${highScale(location[kelpCenterData[i+1].date]+0.2)},${y(index_scale(b.id))} v${-Vgap*0.3} z`\r\n                                                    })\r\n                                                    posEdge.push(a); //绿边放进来\r\n                                                }\r\n                                                if (negNodes1.length > 0 && negNodes2.length > 0) {\r\n                                                    negPath.push({\r\n                                                        date1: kelpCenterData[i].date,\r\n                                                        date2: kelpCenterData[i + 1].date,\r\n                                                        d: `M ${highScale(location[kelpCenterData[i].date]+0.8)},${y(index_scale(a.id))} v${Vgap*0.3} L ${highScale(location[kelpCenterData[i+1].date]+0.2)},${y(index_scale(b.id)+0.3)} v${-Vgap*0.3} z`\r\n                                                    })\r\n                                                    negEdge.push(a) //红边放进来\r\n                                                }\r\n                                            }\r\n\r\n\r\n                                        }\r\n                                    })\r\n                                    return set2Has\r\n                                })\r\n                                //有重叠连线\r\n\r\n                            let negMix = [...negEdge, ...negNodes1].sort((a, b) => index_scale(a.id) - index_scale(b.id));\r\n                            if (negEdge.length > 0) {\r\n                                negPath.push({\r\n                                    date: kelpCenterData[i].date,\r\n                                    d: `M ${highScale(location[kelpCenterData[i].date]+0.8)},${y(index_scale(negMix[0].id))} h${Hgap*0.2} L ${highScale(location[kelpCenterData[i].date]+1)},${y(index_scale(negMix[negMix.length-1].id))} h${-Hgap*0.2} z`\r\n                                })\r\n                            }\r\n                            let posMix = [...posEdge, ...posNodes2].sort((a, b) => index_scale(a.id) - index_scale(b.id));\r\n                            if (posEdge.length > 0) {\r\n                                posPath.push({\r\n                                    date: kelpCenterData[i + 1].date,\r\n                                    d: `M ${highScale(location[kelpCenterData[i+1].date])},${y(index_scale(posMix[0].id))} h${Hgap*0.2} L ${highScale(location[kelpCenterData[i+1].date]+0.2)},${y(index_scale(posMix[posMix.length-1].id))} h${-Hgap*0.2} z`\r\n                                })\r\n                            }\r\n\r\n\r\n\r\n                            if (!ifOverlap) { //没有重叠\r\n                                if (posNodes1.length > 0 && posNodes2.length > 0) { //左右都有绿色\r\n                                    let initpos = [0, 0]\r\n                                    let maxdist = nodelen - 1;\r\n                                    for (let index1 = 0; index1 < posNodes1.length; index1++) {\r\n                                        if (maxdist < 2) {\r\n                                            break;\r\n                                        }\r\n                                        for (let index2 = 0; index2 < posNodes2.length; index2++) {\r\n                                            let dist = Math.abs(index_scale(posNodes1[index1].id) - index_scale(posNodes2[index2].id))\r\n                                            if (dist < 2) {\r\n                                                maxdist = dist;\r\n                                                initpos = [index1, index2];\r\n                                                break;\r\n                                            } else if (dist < maxdist) {\r\n                                                maxdist = dist\r\n                                                initpos = [index1, index2];\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    if (index_scale(posNodes1[initpos[0]].id) > index_scale(posNodes2[initpos[1]].id)) {\r\n                                        posline.push({\r\n                                            date1: kelpCenterData[i].date,\r\n                                            date2: kelpCenterData[i + 1].date,\r\n                                            x1: highScale(location[kelpCenterData[i].date] + 0.7),\r\n                                            x2: highScale(location[kelpCenterData[i + 1].date] + 0.1),\r\n                                            y1: y(index_scale(posNodes1[initpos[0]].id) - 0.3),\r\n                                            y2: y(index_scale(posNodes2[initpos[1]].id) + 0.3),\r\n                                        })\r\n                                    } else {\r\n                                        posline.push({\r\n                                            date1: kelpCenterData[i].date,\r\n                                            date2: kelpCenterData[i + 1].date,\r\n                                            x1: highScale(location[kelpCenterData[i].date] + 0.7),\r\n                                            x2: highScale(location[kelpCenterData[i + 1].date] + 0.1),\r\n                                            y1: y(index_scale(posNodes1[initpos[0]].id) + 0.3),\r\n                                            y2: y(index_scale(posNodes2[initpos[1]].id) - 0.3),\r\n                                        })\r\n                                    }\r\n\r\n                                }\r\n\r\n                                if (negNodes1.length > 0 && negNodes2.length > 0) { //左右都有红色\r\n                                    let initpos = [0, 0]\r\n                                    let maxdist = nodelen - 1;\r\n                                    for (let index1 = 0; index1 < negNodes1.length; index1++) {\r\n                                        if (maxdist < 2) {\r\n                                            break;\r\n                                        }\r\n                                        for (let index2 = 0; index2 < negNodes2.length; index2++) {\r\n                                            let dist = Math.abs(index_scale(negNodes1[index1].id) - index_scale(negNodes2[index2].id))\r\n                                            if (dist < 2) {\r\n                                                maxdist = dist;\r\n                                                initpos = [index1, index2];\r\n                                                break;\r\n                                            } else if (dist < maxdist) {\r\n                                                maxdist = dist\r\n                                                initpos = [index1, index2];\r\n                                            }\r\n                                        }\r\n                                    }\r\n\r\n                                    if (index_scale(negNodes1[initpos[0]].id) > index_scale(negNodes2[initpos[1]].id)) {\r\n                                        negline.push({\r\n                                            date1: kelpCenterData[i].date,\r\n                                            date2: kelpCenterData[i + 1].date,\r\n                                            x1: highScale(location[kelpCenterData[i].date] + 0.9),\r\n                                            x2: highScale(location[kelpCenterData[i + 1].date] + 0.3),\r\n                                            y1: y(index_scale(negNodes1[initpos[0]].id) - 0.3),\r\n                                            y2: y(index_scale(negNodes2[initpos[1]].id) + 0.3),\r\n                                        })\r\n                                    } else {\r\n                                        negline.push({\r\n                                            date1: kelpCenterData[i].date,\r\n                                            date2: kelpCenterData[i + 1].date,\r\n                                            x1: highScale(location[kelpCenterData[i].date] + 0.9),\r\n                                            x2: highScale(location[kelpCenterData[i + 1].date] + 0.3),\r\n                                            y1: y(index_scale(negNodes1[initpos[0]].id) + 0.3),\r\n                                            y2: y(index_scale(negNodes2[initpos[1]].id) - 0.3),\r\n                                        })\r\n                                    }\r\n\r\n\r\n                                }\r\n\r\n                            }\r\n                        }\r\n\r\n\r\n                    }\r\n                    let kelpOpacity = 1\r\n                        //posline\r\n                    this.svg.selectAll('line.posline')\r\n                        .data(posline)\r\n                        .join('line')\r\n                        .classed('kelp', true)\r\n                        .classed('posline', true)\r\n                        .attr('x1', d => d.x1)\r\n                        .attr('y1', d => d.y1)\r\n                        .attr('x2', d => d.x2)\r\n                        .attr('y2', d => d.y2)\r\n                        .attr('stroke', msvSwitch ? posgray : posrect)\r\n                        .attr('stroke-width', Math.min(Hgap, Vgap) * 0.2)\r\n                        .attr('opacity', kelpOpacity)\r\n                        //negline\r\n                    this.svg.selectAll('line.negline')\r\n                        .data(negline)\r\n                        .join('line')\r\n                        .classed('kelp', true)\r\n                        .classed('negline', true)\r\n                        .attr('x1', d => d.x1)\r\n                        .attr('y1', d => d.y1)\r\n                        .attr('x2', d => d.x2)\r\n                        .attr('y2', d => d.y2)\r\n                        .attr('stroke', msvSwitch ? neggray : negrect)\r\n                        .attr('stroke-width', Math.min(Hgap, Vgap) * 0.2)\r\n                        .attr('opacity', kelpOpacity)\r\n                        //neg-path\r\n                    this.svg.selectAll('path.kelpnp')\r\n                        .data(negPath)\r\n                        .join('path')\r\n                        .classed('kelp', true)\r\n                        .classed('kelpnp', true)\r\n                        .attr('d', d => d.d)\r\n                        .attr('fill', msvSwitch ? neggray : negrect)\r\n                        .attr('opacity', kelpOpacity)\r\n                        .attr(\"stroke-width\", 1)\r\n                        //pos-path\r\n                    this.svg.selectAll('path.kelppp')\r\n                        .data(posPath)\r\n                        .join('path')\r\n                        .classed('kelp', true)\r\n                        .classed('kelppp', true)\r\n                        .attr('d', d => d.d)\r\n                        .attr('fill', msvSwitch ? posgray : posrect)\r\n                        .attr('opacity', kelpOpacity)\r\n\r\n                    //绘制光圈\r\n                    if (!msvSwitch) {\r\n                        let lightData = []\r\n                        let lightStream = kelpCenterData\r\n                        lightStream.forEach((item => {\r\n                            item.nodes.filter(item => item.strength > degreeThreshold).forEach((node) => {\r\n                                lightData.push({\r\n                                    id: node.id,\r\n                                    color: node.posdegree - node.negdegree >= 0 ? '#d2664f' : '#5389c0',\r\n                                    date: item.date,\r\n                                })\r\n                            })\r\n                        }))\r\n                        this.svg.selectAll('circle.light')\r\n                            .data(lightData)\r\n                            .join('circle')\r\n                            .classed('light', true)\r\n                            .attr('cx', d => highScale(location[d.date] + 0.5))\r\n                            .attr('cy', d => (y(index_scale(d.id))))\r\n                            .attr('r', Math.min(Hgap, Vgap) * 0.2)\r\n                            .attr('fill', d => d.color)\r\n                            .attr('opacity', kelpOpacity)\r\n                    }\r\n                }\r\n\r\n\r\n\r\n            }\r\n            if (msvSwitch) {\r\n                //矩阵\r\n                let matrices = mdata.filter(({ date }) => unfoldDay.includes(date));\r\n                matrices.forEach(matrix => {\r\n                    if (unfoldDiff.includes(matrix.date)) {\r\n                        let diffRows = diffdata.filter(({ date }) => date === matrix.date)[0].cell\r\n                        let diffData = [];\r\n                        diffRows.forEach((row, rowindex) => {\r\n                            row.forEach((cell, cellindex) => {\r\n                                diffData.push({\r\n                                    source: originInvertIndex(cellindex),\r\n                                    target: originInvertIndex(rowindex),\r\n                                    value: cell\r\n                                })\r\n                            })\r\n                        })\r\n                        this.svg.append('g').attr('class', 'matrix' + matrix.date).classed('matrix', true).selectAll('rect.diffmatrix')\r\n                            .data(diffData)\r\n                            .join('rect')\r\n                            .attr(\"class\", d => 'node' + d.target)\r\n                            .classed('diffmatrix', true)\r\n                            .classed('matrix', true)\r\n                            .attr(\"y\", d => y(index_scale(d.target) - 0.5))\r\n                            .attr(\"x\", d => highScale(location[matrix.date] + 1) + index_scale(d.source) * (y(1) - y(0)))\r\n                            .attr(\"height\", (y(1) - y(0)))\r\n                            .attr(\"width\", y(1) - y(0))\r\n                            .attr('id', d => index_scale(d.source))\r\n                            .attr('fill', d => color(d.value))\r\n                            .attr(\"stroke\", '#e1e3e6')\r\n                            .attr('opacity', 1)\r\n                            .on('click', function(event) {\r\n                                d3.selectAll('rect.neg-node').attr(\"opacity\", '0.1')\r\n                                d3.selectAll('rect.pos-node').attr(\"opacity\", '0.1')\r\n                                d3.selectAll('rect.diffmatrix').attr(\"opacity\", '0.1')\r\n                                d3.selectAll('rect.matrix').attr(\"opacity\", '0.1')\r\n                                let celldata = d3.select(this).data()\r\n\r\n                                d3.selectAll(\".node\" + celldata[0].source).attr(\"opacity\", '1')\r\n                                d3.selectAll(\".node\" + celldata[0].target).attr(\"opacity\", '1')\r\n                                    // d3.selectAll('rect.MSV-edge').attr('opacity','0')\r\n\r\n                                // d3.selectAll('.kelp').attr(\"opacity\",'0')\r\n\r\n\r\n                            })\r\n                            .on(\"mouseout\", function(event) {\r\n                                d3.selectAll('rect.neg-node').attr(\"opacity\", '1')\r\n                                d3.selectAll('rect.pos-node').attr(\"opacity\", '1')\r\n                                d3.selectAll('.arc').remove()\r\n                                d3.selectAll('rect.MSV-edge').attr('opacity', '1')\r\n\r\n                                d3.selectAll('rect.diffmatrix').attr(\"opacity\", '1')\r\n                                d3.selectAll('rect.matrix').attr(\"opacity\", '1')\r\n\r\n                                // d3.selectAll('.kelp').attr(\"opacity\",'0.8')\r\n                            })\r\n                    } else {\r\n                        //原图展开\r\n                        let matrixData = [];\r\n                        matrix.cell.forEach((row, rowindex) => {\r\n                            row.forEach((cell, cellindex) => {\r\n                                matrixData.push({\r\n                                    source: originInvertIndex(cellindex),\r\n                                    target: originInvertIndex(rowindex),\r\n                                    value: cell\r\n                                })\r\n                            })\r\n                        })\r\n                        this.svg.append('g').attr('class', 'matrix' + matrix.date).classed('matrix', true).selectAll('rect.matrix')\r\n                            .data(matrixData)\r\n                            .join('rect')\r\n                            .attr(\"class\", d => 'node' + d.target)\r\n                            .classed('matrix', true)\r\n                            .attr(\"y\", d => y(index_scale(d.target) - 0.5))\r\n                            .attr(\"x\", d => highScale(location[matrix.date] + 1) + index_scale(d.source) * (y(1) - y(0)))\r\n                            .attr(\"height\", (y(1) - y(0)))\r\n                            .attr(\"width\", y(1) - y(0))\r\n                            .attr('id', d => index_scale(d.source))\r\n                            .attr('fill', d => d.target === d.source ? 'white' : mcolor(d.value))\r\n                            .attr(\"stroke\", '#e1e3e6')\r\n                            .attr('opacity', 1)\r\n                            .on('click', function(event) {\r\n                                d3.selectAll('rect.neg-node').attr(\"opacity\", '0.1')\r\n                                d3.selectAll('rect.pos-node').attr(\"opacity\", '0.1')\r\n                                d3.selectAll('rect.diffmatrix').attr(\"opacity\", '0.1')\r\n                                d3.selectAll('rect.matrix').attr(\"opacity\", '0.1')\r\n                                let celldata = d3.select(this).data()\r\n\r\n                                d3.selectAll(\".node\" + celldata[0].source).attr(\"opacity\", '1')\r\n                                d3.selectAll(\".node\" + celldata[0].target).attr(\"opacity\", '1')\r\n\r\n                            })\r\n                            .on(\"mouseout\", function(event) {\r\n                                d3.selectAll('rect.neg-node').attr(\"opacity\", '1')\r\n                                d3.selectAll('rect.pos-node').attr(\"opacity\", '1')\r\n                                d3.selectAll('.arc').remove()\r\n                                d3.selectAll('rect.MSV-edge').attr('opacity', '1')\r\n\r\n                                d3.selectAll('rect.diffmatrix').attr(\"opacity\", '1')\r\n                                d3.selectAll('rect.matrix').attr(\"opacity\", '1')\r\n\r\n                                // d3.selectAll('.kelp').attr(\"opacity\",'0.8')\r\n                            })\r\n                    }\r\n                    //绘制辅助线\r\n                    d3.select('g.matrix' + matrix.date).append('line')\r\n                        .classed('matrixline', true)\r\n                        .attr('x1', highScale(location[matrix.date] + 1))\r\n                        .attr('y1', y(-0.5))\r\n                        .attr('x2', highScale(location[matrix.date] + 1))\r\n                        .attr('y2', y(nodelen - 0.5))\r\n                        .attr('stroke', '#3c374a')\r\n                    d3.select('g.matrix' + matrix.date).append('line')\r\n                        .classed('matrixline', true)\r\n                        .attr('x1', highScale(location[matrix.date] + matrix_width + 1))\r\n                        .attr('y1', y(-0.5))\r\n                        .attr('x2', highScale(location[matrix.date] + matrix_width + 1))\r\n                        .attr('y2', y(nodelen - 0.5))\r\n                        .attr('stroke', '#3c374a')\r\n\r\n                })\r\n\r\n                //绘制high视图\r\n\r\n                this.svg.append('g')\r\n                    .attr('class', 'high-level')\r\n                    .selectAll('g.high')\r\n                    .data(highData)\r\n                    .join('g')\r\n                    .attr('class', 'high')\r\n                    .attr('id', d => d.date)\r\n                    .each(function(ddd, index) {\r\n\r\n                        let day_index = location[ddd.date]\r\n\r\n\r\n                        if (focusSpan[0] !== 'start' && index > focusSpan[0] && index < focusSpan[1]) {\r\n\r\n                        } else {\r\n\r\n                            //绘制边\r\n                            d3.select(this).selectAll('rect.high-edge')\r\n                                .data([0])\r\n                                .join('rect')\r\n                                .attr('class', 'high-edge')\r\n                                .classed('Edate' + ddd.date, true)\r\n                                .attr('x', highScale(day_index))\r\n                                .attr('y', y(0))\r\n                                .attr('width', (highScale(1) - highScale(0)))\r\n                                .attr('height', y(ddd.nodes.length - 1))\r\n                                // .attr('fill',d=>d>0?edgeColor(50):edgeColor(d))\r\n                                .attr('fill', 'white')\r\n                                .attr('opacity', 0)\r\n                                .on('mouseover', function(event) {\r\n                                    //鼠标悬浮，高亮当天；\r\n                                    d3.selectAll('rect.neg-node').attr(\"opacity\", '0.1')\r\n                                    d3.selectAll('rect.pos-node').attr(\"opacity\", '0.1')\r\n                                        // d3.selectAll('.kelp').attr(\"opacity\",'0')\r\n                                    let selector = \".date\" + ddd.date;\r\n                                    d3.selectAll(selector).attr(\"opacity\", '1')\r\n                                        //添加日期标签\r\n                                    d3.select(this.parentNode).append('text')\r\n                                        .classed('datetext', true)\r\n                                        .attr('x', highScale(day_index + 1.5))\r\n                                        .attr('y', y(0))\r\n                                        .text(ddd.date)\r\n                                        .attr('font-size', 15)\r\n                                        .attr('stroke', 'balck')\r\n                                })\r\n                                .on(\"mouseout\", function(event) {\r\n                                    d3.selectAll('rect.neg-node').attr(\"opacity\", '1')\r\n                                    d3.selectAll('rect.pos-node').attr(\"opacity\", '1')\r\n                                        // d3.selectAll('.kelp').attr(\"opacity\",0.8)\r\n                                    d3.selectAll('.datetext').remove()\r\n                                })\r\n                                .on('dblclick', function(event) {\r\n                                    if (unfoldSwitch) {\r\n                                        dispatch(updateUnfoldDiff(ddd.date))\r\n                                    } else {\r\n                                        dispatch(updateUnfoldDay(ddd.date))\r\n                                    }\r\n\r\n                                })\r\n                                //绘制节点\r\n                            d3.select(this).selectAll('g.high-node')\r\n                                .data(ddd.nodes)\r\n                                .join('g')\r\n                                .attr('class', 'high-node')\r\n                                .each(function(node) {\r\n\r\n                                    d3.select(this).append('rect')\r\n                                        .attr('class', 'neg-node')\r\n                                        .classed('date' + ddd.date, true)\r\n                                        .classed('node' + node.id, true)\r\n                                        .attr('x', highScale(day_index + 0.2))\r\n                                        .attr('y', y(index_scale(node.id)))\r\n                                        .attr('width', (highScale(1) - highScale(0)) * 0.6)\r\n                                        .attr('height', d => nodeScale(d.negdegree))\r\n                                        .attr('fill', d => colorSwitch ? color(d.negvalue) : negrect)\r\n                                        .on('mouseover', function(event) {\r\n                                            d3.selectAll('rect.neg-node').attr(\"opacity\", '0.1')\r\n                                            d3.selectAll('rect.pos-node').attr(\"opacity\", '0.1')\r\n                                            d3.selectAll('rect.diffmatrix').attr(\"opacity\", '0.1')\r\n                                            d3.selectAll('rect.matrix').attr(\"opacity\", '0.1')\r\n                                            let selector = \".node\" + node.id;\r\n                                            d3.selectAll(selector).attr(\"opacity\", '1')\r\n\r\n                                            d3.selectAll('rect.MSV-edge').attr('opacity', '0')\r\n                                            d3.selectAll('.start' + node.id).attr('opacity', '1')\r\n                                            d3.selectAll('.end' + node.id).attr('opacity', '1')\r\n\r\n                                            // d3.selectAll('.kelp').attr(\"opacity\",'0')\r\n\r\n\r\n                                        })\r\n                                        .on(\"mouseout\", function(event) {\r\n                                            d3.selectAll('rect.neg-node').attr(\"opacity\", '1')\r\n                                            d3.selectAll('rect.pos-node').attr(\"opacity\", '1')\r\n                                            d3.selectAll('.arc').remove()\r\n                                            d3.selectAll('rect.MSV-edge').attr('opacity', '1')\r\n\r\n                                            d3.selectAll('rect.diffmatrix').attr(\"opacity\", '1')\r\n                                            d3.selectAll('rect.matrix').attr(\"opacity\", '1')\r\n\r\n                                            // d3.selectAll('.kelp').attr(\"opacity\",'0.8')\r\n                                        })\r\n\r\n                                    d3.select(this).append('rect')\r\n                                        .attr('class', 'pos-node')\r\n                                        .classed('date' + ddd.date, true)\r\n                                        .classed('node' + node.id, true)\r\n                                        .attr('x', highScale(day_index + 0.2))\r\n                                        .attr('y', d => (y(index_scale(node.id)) - nodeScale(d.posdegree)))\r\n                                        .attr('width', (highScale(1) - highScale(0)) * 0.6)\r\n                                        .attr('height', d => nodeScale(d.posdegree))\r\n                                        .attr('fill', d => colorSwitch ? color(d.posvalue) : posrect)\r\n                                        .on('mouseover', function(event) {\r\n\r\n                                            d3.selectAll('rect.neg-node').attr(\"opacity\", '0.1')\r\n                                            d3.selectAll('rect.pos-node').attr(\"opacity\", '0.1')\r\n                                            d3.selectAll('rect.diffmatrix').attr(\"opacity\", '0.1')\r\n                                            d3.selectAll('rect.matrix').attr(\"opacity\", '0.1')\r\n\r\n                                            d3.selectAll('rect.MSV-edge').attr('opacity', '0')\r\n                                            let selector = \".node\" + node.id;\r\n                                            d3.selectAll(selector).attr(\"opacity\", '1')\r\n                                            d3.selectAll('.start' + node.id).attr('opacity', '1')\r\n                                            d3.selectAll('.end' + node.id).attr('opacity', '1')\r\n\r\n                                            // d3.selectAll('.kelp').attr(\"opacity\",'0')\r\n\r\n                                        })\r\n                                        .on(\"mouseout\", function(event) {\r\n                                            d3.selectAll('rect.neg-node').attr(\"opacity\", '1')\r\n                                            d3.selectAll('rect.pos-node').attr(\"opacity\", '1')\r\n                                            d3.selectAll('.arc').remove()\r\n                                            d3.selectAll('rect.MSV-edge').attr('opacity', '1')\r\n\r\n                                            d3.selectAll('rect.diffmatrix').attr(\"opacity\", '1')\r\n                                            d3.selectAll('rect.matrix').attr(\"opacity\", '1')\r\n\r\n                                            // d3.selectAll('.kelp').attr(\"opacity\",'0.8')\r\n                                        })\r\n\r\n\r\n                                })\r\n\r\n\r\n                        }\r\n\r\n\r\n                    })\r\n            }\r\n        }\r\n        // Function to compute density\r\n    kernelDensityEstimator(kernel, X) {\r\n        return function(V) {\r\n            return X.map(function(x) {\r\n                return [x, d3.mean(V, function(v) { return kernel(x - v); })];\r\n            });\r\n        };\r\n    }\r\n    kernelEpanechnikov(k) {\r\n        return function(v) {\r\n            return Math.abs(v /= k) <= 1 ? 0.75 * (1 - v * v) / k : 0;\r\n        };\r\n    }\r\n    reorder4Weight(highMatrix, nodecount, MatrixSet, orderweight) {\r\n        let dist = [] //距离矩阵 用于leaforder\r\n        let weight = orderweight * 0.01\r\n        let mweight = 1 - weight\r\n        let n = nodecount; //节点数量\r\n        let N = n ** 2; //矩阵cell数量，莫兰公式左上值\r\n        let K = 2 * n * (n - 1) //总邻接数量，莫兰公式左下值\r\n            //处理high矩阵\r\n        let t = highMatrix.length\r\n        highMatrix = reorder.transpose(highMatrix)\r\n        for (let i = 0; i < n; i++) {\r\n            let r = []\r\n            for (let j = 0; j < n; j++) {\r\n\r\n                let d = 0;\r\n                if (i !== j) {\r\n                    for (let k = 0; k < t; k++) {\r\n                        d = d + Math.abs(highMatrix[i][k][0] - highMatrix[j][k][0]) + Math.abs(highMatrix[i][k][1] - highMatrix[j][k][1])\r\n                    }\r\n                    d = weight * 0.5 * d / (n - 1) / t\r\n                }\r\n                r.push(d)\r\n            }\r\n            dist.push(r);\r\n        }\r\n            //处理矩阵\r\n        let Mlen = MatrixSet.length //矩阵数量\r\n        if (Mlen > 0) {\r\n            MatrixSet.forEach((matrix, mindex) => {\r\n                let A = 0; //求矩阵权重的总和\r\n                matrix.forEach((row, rowindex) => {\r\n                    row.forEach((cell, cellindex) => {\r\n                        A = A + cell\r\n                    })\r\n                })\r\n                let a = A / N; //矩阵权重的平均值\r\n                let B = 0; //求莫兰指数右下值\r\n                matrix.forEach((row, rowindex) => {\r\n                    row.forEach((cell, cellindex) => {\r\n                        B = B + (cell - a) ** 2\r\n                    })\r\n                })\r\n                for (let i = 0; i < n; i++) { //计算任意两行的距离\r\n                    for (let j = 0; j < i; j++) {\r\n                        let rowDist = 0;\r\n                        for (let p = 0; p < n; p++) {\r\n                            rowDist = rowDist + ((matrix[i][p] - a) * (matrix[j][p] - a))\r\n                        }\r\n                        rowDist = (N / K) * (2 * rowDist / B) //Is\r\n                        dist[i][j] += (((1 + (1 - n) * rowDist) * 0.5) / Mlen) * mweight //调整到0-1区间，然后除以多个矩阵数量集合感知，再乘以1-权重\r\n                        dist[j][i] += (((1 + (1 - n) * rowDist) * 0.5) / Mlen) * mweight\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        let order = reorder.optimal_leaf_order();\r\n        let row_perm = order.distance_matrix(dist)(highMatrix)\r\n        return row_perm;\r\n\r\n    }\r\n    MatrixMoran(matrix) {\r\n        let n = matrix.length; //节点数量\r\n        let N = n ** 2; //矩阵cell数量，莫兰公式左上值\r\n        let K = 2 * n * (n - 1) //总邻接数量，莫兰公式左下值\r\n        let A = 0; //求矩阵权重的总和\r\n        matrix.forEach((row, rowindex) => {\r\n            row.forEach((cell, cellindex) => {\r\n                A = A + cell\r\n            })\r\n        })\r\n        let a = A / N; //矩阵权重的平均值\r\n        let B = 0; //求莫兰指数右下值\r\n        matrix.forEach((row, rowindex) => {\r\n            row.forEach((cell, cellindex) => {\r\n                B = B + (cell - a) ** 2\r\n            })\r\n        })\r\n        let D = 0; //莫兰公式右上项\r\n        for (let i = 0; i < n - 1; i++) { //计算i和i+1行的距离\r\n            for (let j = 0; j < n; j++) {\r\n                D = D + (matrix[i][j] - a) * (matrix[i + 1][j] - a)\r\n            }\r\n        }\r\n        let moran = (N / K) * (2 * D / B)\r\n        console.log(n, a, A, N, K, D, B)\r\n        return moran\r\n    }\r\n    weighted_value_rows(r1, r2, cells, m) {\r\n        // console.log(r1,r2,cells,m)\r\n        let result = 0;\r\n        for (let i = 0; i < r1.length; i++) {\r\n            // result += Math.abs(r1[i]-r2[i])\r\n            // result += (r1[i]-r2[i])**2\r\n            result += (r1[i] * cells - m) * (r2[i] * cells - m);\r\n            if (r1[i] === 1 && r2[i] === 1) {\r\n                result += 100;\r\n            } else {\r\n                result += 0\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    reorderHigh(highData, nodecount, hugeMatrix) {\r\n        let matrix = [];\r\n        let m = 0,\r\n            n = 0;\r\n        for (let i = 0; i < highData.length; i++) {\r\n            let row = []\r\n            this.nodes.forEach((item, index) => {\r\n                row.push(highData[i].nodes[index].posdegree)\r\n            })\r\n            let row1 = []\r\n            this.nodes.forEach((item, index) => {\r\n                    row1.push(highData[i].nodes[index].negdegree)\r\n                })\r\n            matrix.push(row)\r\n            matrix.push(row1)\r\n        }\r\n        console.log(matrix)\r\n        matrix = reorder.transpose(matrix)\r\n        console.log(matrix)\r\n        if (hugeMatrix.length > 0) {\r\n            matrix.forEach((item, index) => {\r\n                matrix[index] = matrix[index].concat(hugeMatrix[index])\r\n            })\r\n        }\r\n        console.log(matrix)\r\n        let dist = [];\r\n        let square = false;\r\n        for (let i = 0; i < matrix.length; i++) {\r\n            let r = []\r\n            for (let j = 0; j < matrix.length; j++) {\r\n\r\n                let d = this.weighted_value_rows(matrix[i], matrix[j], n, m);\r\n                if (square) {\r\n                    if (d >= 0) {\r\n                        r.push(-d * d);\r\n                        // dist[i][j] += -d * d;\r\n                    } else {\r\n                        r.push(d * d);\r\n                        // dist[i][j] += d * d;\r\n                    }\r\n                } else {\r\n                    r.push(-d);\r\n                    // dist[i][j] += -d;\r\n                }\r\n            }\r\n            dist.push(r);\r\n        }\r\n        console.log('dist', dist)\r\n        let order = reorder.optimal_leaf_order();\r\n        let row_perm = order.distance_matrix(dist)(matrix)\r\n        return row_perm;\r\n    }\r\ndrawColorLegend4Diff(container, width, height, start_point, axis_label) {\r\n    // 选择绘制容器\r\n    var svg = d3.select(container);\r\n    svg.attr(\"width\", width+start_point[0]*2).attr(\"height\", height * 3);\r\n\r\n    // 构建渐变色实例 #5389c0 #d2664f #E09585 #82a9d1\r\n    var linearGradient = svg.append(\"g\").append(\"linearGradient\").attr(\"id\", \"colorGradientDiff\"); \r\n    linearGradient.append(\"stop\").attr(\"offset\", \"0%\") .attr(\"stop-color\", \"#5389c0\"); \r\n    linearGradient.append(\"stop\").attr(\"offset\", \"49%\").attr(\"stop-color\", \"#ecf2f8\");\r\n    linearGradient.append(\"stop\").attr(\"offset\", \"50%\").attr(\"stop-color\", \"white\");\r\n    linearGradient.append(\"stop\").attr(\"offset\", \"51%\").attr(\"stop-color\", \"#faedeb\");\r\n    linearGradient.append(\"stop\").attr(\"offset\", \"100%\").attr(\"stop-color\", \"#d2664f\");\r\n\r\n    //用linearGradient填充矩形\r\n    svg.append(\"g\").attr(\"transform\", \"translate(\" + start_point[0] + \", \" + start_point[1] + \")\")\r\n      .append(\"rect\").attr(\"width\", width).attr(\"height\", height).style(\"fill\", \"url('#colorGradientDiff')\"); \r\n\r\n    // 构建刻度比例尺\r\n    var axis_scale = d3.scaleLinear().domain([0, 10]).range([0.7, width-0.3]);\r\n\r\n    // 绘制刻度：上面\r\n    var axis_top = svg.append(\"g\")\r\n      .attr(\"transform\", \"translate(\" + start_point[0] + \", \" + start_point[1] + \")\")\r\n      .call(d3.axisTop(axis_scale).ticks(2).tickSize(2).tickFormat(() => \"\"));\r\n    axis_top.append(\"text\").text(\"Negtive\").attr(\"x\", axis_scale(2.5)).attr(\"y\", -7).attr(\"font-size\", 8).attr(\"fill\", \"#82a9d1\");\r\n    axis_top.append(\"text\").text(\"Positive\").attr(\"x\", axis_scale(7.5)).attr(\"y\", -7).attr(\"font-size\", 8).attr(\"fill\", \"#E09585\");    \r\n    // 刻度+线:调整不透明度\r\n    axis_top.select(\".domain\").attr(\"opacity\", 0.5);\r\n    axis_top.selectAll(\".tick\").select(\"line\").attr(\"opacity\", 0.6);\r\n\r\n    // 绘制刻度:下面\r\n    var axis_bottom = svg.append(\"g\")\r\n      .attr(\"transform\", \"translate(\" + start_point[0] + \", \" + (start_point[1] + height) + \")\")\r\n      .call(d3.axisBottom(axis_scale).ticks(2).tickSize(2).tickFormat(() => \"\"));\r\n    axis_bottom.append(\"text\").text(axis_label[0]).attr(\"x\", axis_scale(0)).attr(\"y\", 12).attr(\"font-size\", 8).attr(\"fill\", \"black\");\r\n    axis_bottom.append(\"text\").text(axis_label[1]).attr(\"x\", axis_scale(5)).attr(\"y\", 12).attr(\"font-size\", 8).attr(\"fill\", \"black\");\r\n    axis_bottom.append(\"text\").text(axis_label[2]).attr(\"x\", axis_scale(10)).attr(\"y\", 12).attr(\"font-size\", 8).attr(\"fill\", \"black\");    \r\n    // 刻度+线:调整不透明度\r\n    axis_bottom.select(\".domain\").attr(\"opacity\", 0.5);\r\n    axis_bottom.selectAll(\".tick\").select(\"line\").attr(\"opacity\", 0.6);\r\n  }\r\n\r\n  drawColorLegend4Org(container, width, height, start_point, axis_label) {\r\n    // 选择绘制容器\r\n    var svg = d3.select(container);\r\n    svg.attr(\"width\", width+start_point[0]*2).attr(\"height\", height * 2);\r\n\r\n    // 构建渐变色实例\r\n    var linearGradient = svg.append(\"g\").append(\"linearGradient\").attr(\"id\", \"colorGradientOrg\"); \r\n    linearGradient.append(\"stop\").attr(\"offset\", \"0%\").attr(\"stop-color\", \"white\");\r\n    linearGradient.append(\"stop\").attr(\"offset\", \"100%\").attr(\"stop-color\", \"#3e403f\");\r\n\r\n    //用linearGradient填充矩形\r\n    svg.append(\"g\").attr(\"transform\", \"translate(\" + start_point[0] + \", \" + start_point[1] + \")\")\r\n      .append(\"rect\").attr(\"width\", width).attr(\"height\", height).style(\"fill\", \"url('#colorGradientOrg')\"); \r\n\r\n    // 构建刻度比例尺\r\n    var axis_scale = d3.scaleLinear().domain([0, 10]).range([0.7, width-0.3]);\r\n\r\n    // 绘制刻度:下面\r\n    var axis_bottom = svg.append(\"g\")\r\n      .attr(\"transform\", \"translate(\" + start_point[0] + \", \" + (start_point[1] + height) + \")\")\r\n      .call(d3.axisBottom(axis_scale).ticks(1).tickSize(2).tickFormat(() => \"\"));\r\n    axis_bottom.append(\"text\").text(axis_label[0]).attr(\"x\", axis_scale(0)).attr(\"y\", 12).attr(\"font-size\", 8).attr(\"fill\", \"black\");\r\n    axis_bottom.append(\"text\").text(axis_label[1]).attr(\"x\", axis_scale(10)).attr(\"y\", 12).attr(\"font-size\", 8).attr(\"fill\", \"black\");    \r\n    // 刻度+线:调整不透明度\r\n    axis_bottom.select(\".domain\").attr(\"opacity\", 0.5);\r\n    axis_bottom.selectAll(\".tick\").select(\"line\").attr(\"opacity\", 0.6);\r\n  }\r\n\r\n  drawColorLegendOuter() { \r\n    this.drawColorLegend4Diff(\"#scale-diff\", 90, 15, [0, 15], [-1, 0, 1]);\r\n    this.drawColorLegend4Org(\"#scale-org\", 90, 15, [5, 0], [0, 1]);\r\n  }\r\n    // 宽，高，【，y】\r\n};\r\n\r\nexport default new chart();","import React from 'react';\nimport { Card, Tooltip, Button, Switch,Slider } from 'antd';\nimport Chart from '../views/msv2-chart';\nimport './view-comp-style.less';\nimport { connect } from \"react-redux\";\nimport {ReloadOutlined ,RetweetOutlined } from '@ant-design/icons';\nimport {reset, updateEdgeReorder, updateNeedOrder} from '../store/actions';\n\n\nclass View extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      resetcheck:'default',\n      msvSwitch:true,\n      kelpSwitch:true,\n      streamSwitch:false,\n      unfoldSwitch:true,\n      msvnodeSwitch:true,\n      threshold:50,\n      orderweight:50,\n      maxmapping:100,\n      colorSwitch:false,\n    };\n    this.resetButton = this.resetButton.bind(this) \n    this.unfoldSwitch = this.unfoldSwitch.bind(this) \n    this.nodeReorder = this.nodeReorder.bind(this) \n    this.edgeReorder = this.edgeReorder.bind(this) \n    this.streamSwitch = this.streamSwitch.bind(this) \n    this.MSVSwitch = this.MSVSwitch.bind(this)\n  }\n\n  componentDidMount() {\n    const { timeSpan ,nodeOrder} = this.props;\n    Chart.init(this.container,timeSpan, nodeOrder, this.props.dispatch);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { timeSpan, unfoldDay,unfoldDiff,nodeOrder,focusSpan,needOrder} = this.props;\n    console.log(needOrder,this.props.needOrder)\n    if(prevProps.msvSwitch !== this.state.msvSwitch  || prevProps.needOrder !== needOrder || prevProps.timeSpan !== timeSpan || prevProps.unfoldSwitch !== this.state.unfoldSwitch || prevProps.unfoldDay !== unfoldDay || prevProps.nodeOrder.toString() !== nodeOrder.toString()){    \n      Chart.update(timeSpan,unfoldDay,unfoldDiff,nodeOrder,focusSpan,needOrder,this.state.threshold,this.state.maxmapping,this.state.orderweight,this.state.unfoldSwitch, this.state.msvSwitch,this.state.kelpSwitch ,this.state.colorSwitch,this.props.dispatch);\n    }\n  }\n  resetButton() {\n    this.props.dispatch(reset())\n  }\n  unfoldSwitch(checked){\n    this.setState({\n      unfoldSwitch:checked,\n    })\n  }\n  colorSwitch(checked){\n    this.setState({\n      colorSwitch:checked,\n    })\n  }\n  streamSwitch(checked){\n    this.setState({\n      streamSwitch:checked,\n    })\n  }\n  nodeReorder(){\n    this.props.dispatch(updateNeedOrder(true))\n  }\n  MSVSwitch(checked){\n    this.setState({\n      msvSwitch:checked,\n    })\n  }\n  KelpSwitch(checked){\n    this.setState({\n      kelpSwitch:checked,\n    })\n  }\n  msvnodeSwitch(checked){\n    this.setState({\n      msvnodeSwitch:checked,\n    })\n  }\n  StrongAfterChange(value){\n    this.setState({\n      threshold:value,\n    })\n  }\n  MaxAfterChange(value){\n    this.setState({\n      maxmapping:value,\n    })\n  }\n  OrderWeight(value){\n    this.setState({\n      orderweight:value,\n    })\n  }\n  edgeReorder(checked){\n    if(checked){\n      this.props.dispatch(updateEdgeReorder(true))\n    }else{\n      this.props.dispatch(updateEdgeReorder(false))\n    }\n  }\n\n  render() {\n    return (\n      <Card className=\"view view-i\" title=\"Nested Matrix Design\" extra={\n\n        <div>   \n                <div style={{float:\"left\"}}> &ensp; Max: &ensp; </div>\n                <div style={{width:\"150px\",float:\"left\"}}>\n\n                  <Tooltip title=\"MaxMapping\">\n                    <Slider defaultValue={100} onAfterChange={(value)=>this.MaxAfterChange(value)} />\n                  </Tooltip>  \n                </div>\n                <div style={{float:\"left\"}}> &ensp; Threshold: &ensp; </div>\n                <div style={{width:\"150px\",float:\"left\"}}>\n\n                  <Tooltip title=\"Strong Threshold\">\n                    <Slider defaultValue={50} onAfterChange={(value)=>this.StrongAfterChange(value)} />\n                  </Tooltip>  \n                </div>\n\n                <div style={{float:\"left\"}}>  &ensp; OrderWeight: &ensp;  </div>\n                <div style={{width:\"150px\",float:\"left\"}}>\n\n                  <Tooltip title=\"OrderWeight\">\n                    <Slider defaultValue={50} onAfterChange={(value)=>this.OrderWeight(value)} />\n                  </Tooltip>  \n                </div>\n                <div style={{float:\"left\"}}>\n                &ensp; Reorder: &ensp;\n                <Tooltip title=\"node Reorder\">\n                  <Button shape=\"circle\" type={this.state.resetcheck} onClick={this.nodeReorder} icon={<RetweetOutlined  style={{color:\"#3c374a\"}} />} size={'small'} ></Button>\n                </Tooltip>  \n                &ensp; UnfoldSwitch: &ensp; \n                <Tooltip title=\"Choose to unfold difference or original graph\">\n                  <Switch checkedChildren=\"diff\" unCheckedChildren=\"origin\" defaultChecked onChange={(checked)=>this.unfoldSwitch(checked)}/>\n                </Tooltip>\n                &ensp; MatrixSwitch: &ensp; \n                <Tooltip title=\"Display Matrix or not\">\n                  <Switch checkedChildren=\"on\" unCheckedChildren=\"off\" defaultChecked onChange={(checked)=>this.MSVSwitch(checked)}/>\n                </Tooltip> \n                &ensp; MaskSwitch: &ensp; \n                <Tooltip title=\"Display Difference Mask or not\">\n                  <Switch checkedChildren=\"on\" unCheckedChildren=\"off\" defaultChecked onChange={(checked)=>this.KelpSwitch(checked)}/>\n                </Tooltip>   \n\n                &ensp; MaskFocus: &ensp; \n                <Tooltip title=\"Choose the focus mode of Difference Mask\">\n                  <Switch checkedChildren=\"weight\" unCheckedChildren=\"degree\" onChange={(checked)=>this.colorSwitch(checked)}/>\n                </Tooltip>\n                &ensp; Reset: &ensp; \n                <Tooltip title=\"reset\">\n                  <Button shape=\"circle\" type={this.state.resetcheck} onClick={this.resetButton} icon={<ReloadOutlined  style={{color:\"#3c374a\"}} />} size={'small'} ></Button>\n                </Tooltip>\n\n        </div>\n      </div>\n      }>\n        {/* <div className=\"view-container\" ref={ ref => this.container = ref }></div> */}\n<div className=\"view-container\" ref={ref => this.container = ref} style={{ position:\"relative\" }}>\n          <div style={{ width: '4%', display: 'flex', flexDirection: 'Column', justifyContent: 'flex-start', alignItems: 'center', position: \"absolute\", left: \"10px\", top: \"12px\" }}>\n            <svg id=\"scale-diff\" />\n            <svg id=\"scale-org\" style={{ margin: \"5 0\" }}/>\n          </div>\n        </div>\n        <div className=\"tooltip\"></div>\n      </Card>\n    );\n  }\n}\nconst mapStateToProps = (state, props) => ({\n  timeSpan:state.timeSpan,\n  unfoldDay:state.unfoldDay,\n  unfoldDiff:state.unfoldDiff,\n  nodeOrder:state.nodeOrder,\n  focusSpan:state.focusSpan,\n  needOrder:state.needOrder,\n  unfoldSwitch:state.unfoldSwitch,\n  MSVorder:state.MSVorder,\n  edgeReorder:state.edgeReorder,\n  streamSwitch:state.streamSwitch,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  dispatch\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(View);","import * as d3 from 'd3';\r\nimport originData from './data/dataset1/1D.json';\r\nimport { updateTimeSpan, updateSelectedDate } from '../store/actions';\r\n\r\nclass chart {\r\n    // 画布的宽高\r\n    width = 0;\r\n    height = 0;\r\n    // 外边距\r\n    margin = {\r\n        top: 10,\r\n        left: 30,\r\n        bottom: 20,\r\n        right: 10\r\n    };\r\n    svg = null;\r\n    // tooltip\r\n    tooltip = null;\r\n    topK = 10;\r\n    // 比例尺\r\n    x = d3.scaleLinear()\r\n    y = d3.scaleLinear()\r\n    time = d3.scaleUtc()\r\n    xAxis = null;\r\n    yAxis = null;\r\n    //线生成器\r\n    line = d3.line()\r\n        .defined(d => !isNaN(d.x))\r\n        .x(d => this.x(d.date))\r\n        .y(d => this.y(d.x));\r\n    //刷选初始化\r\n    brush = d3.brushX();\r\n    //时间转换器\r\n    parseDate = d3.timeParse('%Y-%m-%d');\r\n    //symbols\r\n    symbolSize = 60;\r\n    symbol = d3.symbol().type(d3.symbolTriangle).size(this.symbolSize);\r\n\r\n    // 初始化\r\n    init(container, dispatch) {\r\n        let data = JSON.parse(JSON.stringify(originData));\r\n        // data = data.slice(2200,2300)\r\n        data.forEach(element => {\r\n            element.date = this.parseDate(element.date);\r\n        });\r\n        //长宽获取\r\n        this.width = container.clientWidth;\r\n        this.height = container.clientHeight;\r\n        //比例尺赋值\r\n        this.time.domain(d3.extent(data, d => d.date))\r\n            .range([this.margin.left, this.width - this.margin.right])\r\n        this.x.domain([0, data.length - 1])\r\n            .range([this.margin.left+5, this.width - this.margin.right])\r\n        this.y.domain([d3.max(data, d => d.x), d3.min(data, d => d.x)]).nice()\r\n            .range([this.margin.top, this.height - this.margin.bottom])\r\n        let colorScale = d3.scaleLinear()\r\n            .domain([0, data.length])\r\n            .range(['#dbe4ff', '#396EB0'])\r\n            //刷选初始化\r\n        this.brush\r\n            .extent([\r\n                [this.margin.left, this.margin.top],\r\n                [this.width - this.margin.right, this.height+4 - this.margin.bottom]\r\n            ])\r\n            .on('end', (event) => {\r\n                let selection = event.selection;\r\n                if (selection == null) {\r\n                    return;\r\n                }\r\n                let dateRange = selection.map(d => this.x.invert(d));\r\n\r\n                // let dateFormat = d3.timeFormat(\"%Y-%m-%d\"); \r\n\r\n                let begin = dateRange[0];\r\n                let end = dateRange[1];\r\n                dispatch(updateTimeSpan([begin, end]))\r\n            })\r\n            .on(\"start\", (event) => {\r\n                dispatch(updateSelectedDate([]))\r\n            })\r\n            // //坐标轴赋值\r\n        this.yAxis = g => g\r\n            .attr(\"transform\", `translate(${this.margin.left},0)`)\r\n            .call(d3.axisLeft(this.y).ticks(5))\r\n            .call(g => g.select(\".domain\").remove())\r\n        this.xAxis = g => g\r\n            .attr(\"transform\", `translate(0,${this.height+4 - this.margin.bottom})`)\r\n            .call(d3.axisBottom(this.time).ticks(this.width / 80).tickSizeOuter(0))\r\n            .call(g => g.select(\".domain\").remove())\r\n\r\n        //svg创建\r\n        this.svg = d3.select(container)\r\n            .append('svg')\r\n            .attr('width', this.width)\r\n            .attr('height', this.height)\r\n\r\n        this.svg.append('g').call(this.xAxis);\r\n        this.svg.append('g').call(this.yAxis);\r\n\r\n        //画散点\r\n        this.scatter = this.svg.selectAll('circle.scatter')\r\n            .data(data)\r\n            .join('circle')\r\n            // .join('circle')\r\n            .classed('scatter', true)\r\n            .attr('cx', (d, i) => this.x(i))\r\n            .attr('cy', d => this.y(d.x))\r\n            .attr('r', 3)\r\n            .attr('id', (d, i) => d.date)\r\n            // .attr('date',(d,i)=> d.date)\r\n            .attr('stroke-width', 0.1)\r\n            .attr('stroke', 'gray')\r\n            // .attr('opacity',0.8)\r\n            .attr('fill', (d, i) => colorScale(i))\r\n            // .attr('fill',(d,i) => {\r\n            // let date = new Date(d.date) \r\n            // return colorScale(date.getMonth())})\r\n            //添加brush\r\n        this.svg.append('g')\r\n            .attr('class', 'timeline-brush')\r\n            .call(this.brush);\r\n\r\n\r\n\r\n        // this.update(dispatch);\r\n    }\r\n\r\n    // 更新数据，重绘视图\r\n    update(selectedDate, dispatch) {\r\n        //删除原有svg\r\n        d3.select('g.timeline-selectedDate').remove();\r\n\r\n        if (selectedDate.length > 0) {\r\n            this.svg.append('g')\r\n                .attr('class', 'timeline-selectedDate')\r\n                .selectAll('path.selectedTick')\r\n                .data(selectedDate)\r\n                .join('path')\r\n                .attr('d', this.symbol)\r\n                .attr('class', 'selectedTick')\r\n                .attr(\"transform\", d => {\r\n                    return `translate(${this.x(this.parseDate(d))},${0}) rotate(180) scale(1.5)`;\r\n                })\r\n                // .attr('fill', (d, i) => i==0?'black': 'none')\r\n                .attr('opacity', 0.4)\r\n                .attr('stroke', 'black')\r\n                .attr('stroke-width', 2)\r\n        }\r\n\r\n    }\r\n\r\n    drawPath(data, xScale, yScale) {\r\n\r\n        let path = d3.path();\r\n        path.moveTo(xScale(data[0].x), yScale(data[0].y));\r\n        data.slice(1, data.length).forEach((value, index, array) => {\r\n            path.lineTo(xScale(array[index].x), yScale(array[index].y))\r\n        });\r\n        return path;\r\n    }\r\n\r\n\r\n\r\n};\r\n\r\nexport default new chart();","import React from 'react';\r\nimport { Card, Tooltip, Button } from 'antd';\r\nimport Chart from '../views/project-timeline';\r\nimport './view-comp-style.less';\r\nimport { connect } from \"react-redux\";\r\nimport {ReloadOutlined } from '@ant-design/icons';\r\nimport {updateSelectedDate} from '../store/actions';\r\n\r\nclass View extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resetcheck:'default'\r\n    };\r\n    this.resetButton = this.resetButton.bind(this) \r\n  }\r\n\r\n  componentDidMount() {\r\n    const { selectedDate } = this.props;\r\n    Chart.init(this.container, this.props.dispatch);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { selectedDate } = this.props;\r\n    if(prevProps.selectedDate !== selectedDate){\r\n      Chart.update(selectedDate, this.props.dispatch);\r\n    }\r\n  }\r\n  resetButton() {\r\n    this.props.dispatch(updateSelectedDate([]))\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Card className=\"view view-a\" title=\"TimeLine\" extra={\r\n        <div>                \r\n                <Tooltip title=\"reset\">\r\n                  <Button shape=\"circle\" type={this.state.resetcheck} onClick={this.resetButton} icon={<ReloadOutlined  style={{color:\"#3c374a\"}} />} size={'small'} ></Button>\r\n                </Tooltip>\r\n        </div>\r\n      }>\r\n        <div className=\"view-container\" ref={ ref => this.container = ref }></div>\r\n        <div className=\"tooltip\"></div>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = (state, props) => ({\r\n  selectedDate:state.selectedDate\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  dispatch\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(View);","import React from 'react';\nimport './App.less';\nimport MSV2 from './components/MSV2';\nimport ProjectTimeLine from './components/ProjectTimeLine';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <ProjectTimeLine></ProjectTimeLine>\n        <MSV2></MSV2>\n    </div>\n  );\n}\n  \n  export default App;\n","\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","const reducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'ADD_UNFOLDDAY': {\r\n            const { unfoldDay } = state\r\n            console.log(unfoldDay)\r\n            return {\r\n                ...state,\r\n                unfoldDay: [...unfoldDay,action.payload],\r\n            };\r\n        }\r\n        case 'DELETE_UNFOLDDAY': {\r\n            const { unfoldDay } = state\r\n            return {\r\n                ...state,\r\n                unfoldDay:unfoldDay.filter((item)=>item!==action.payload), \r\n            };\r\n        }\r\n        case 'UPDATE_UNFOLDDAY': {\r\n            const { unfoldDay,unfoldDiff } = state\r\n            console.log(unfoldDay)\r\n            if(unfoldDay.includes(action.payload)){\r\n                if(unfoldDiff.includes(action.payload)){\r\n                    return {\r\n                        ...state,\r\n                        unfoldDiff:unfoldDiff.filter((item)=>item!==action.payload),\r\n                        // needOrder:true,\r\n                    };\r\n                }else{\r\n                    return {\r\n                        ...state,\r\n                        unfoldDay:unfoldDay.filter((item)=>item!==action.payload),\r\n                        unfoldDiff:unfoldDiff.filter((item)=>item!==action.payload),\r\n                        // needOrder:true,\r\n                    };\r\n                }\r\n            }else{\r\n                return {\r\n                    ...state,\r\n                    unfoldDay: [...unfoldDay,action.payload],\r\n                    // needOrder:true,\r\n                };\r\n            }\r\n\r\n        }\r\n        case 'UPDATE_UNFOLDDIFF': {\r\n            const { unfoldDiff,unfoldDay } = state\r\n            console.log(unfoldDiff)\r\n            if(unfoldDay.includes(action.payload)){\r\n                if(unfoldDiff.includes(action.payload)){\r\n                    return {\r\n                        ...state,\r\n                        unfoldDiff:unfoldDiff.filter((item)=>item!==action.payload), \r\n                        unfoldDay:unfoldDay.filter((item)=>item!==action.payload), \r\n                        // needOrder:true,\r\n                    };\r\n                }else{\r\n                    return {\r\n                        ...state,\r\n                        unfoldDiff: [...unfoldDiff,action.payload], \r\n                        // needOrder:true,\r\n                    };\r\n                }\r\n\r\n            }else{\r\n                return {\r\n                    ...state,\r\n                    unfoldDiff: [...unfoldDiff,action.payload],\r\n                    unfoldDay: [...unfoldDay,action.payload],\r\n                    // needOrder:true,\r\n                };\r\n            }\r\n\r\n        }\r\n        case 'UPDATE_TIMESPAN': {\r\n            console.log('timespan',action.payload)\r\n            return {\r\n                ...state,\r\n                timeSpan: action.payload,\r\n                // nodeOrder:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27],\r\n                focusSpan:['start','end'],\r\n                unfoldDay:[],\r\n                unfoldDiff:[],\r\n                needOrder:false,\r\n                unfoldSwitch:true,\r\n                edgeReorder:false,\r\n                MSVorder:false,\r\n            };\r\n        }\r\n        case 'UPDATE_NEEDORDER': {\r\n            console.log('NEEDORDER',action.payload)\r\n            return {\r\n                ...state,\r\n                needOrder: action.payload,\r\n            };\r\n        }\r\n        case 'UPDATE_FOCUSSPAN': {\r\n            console.log('FUCUSspan',action.payload)\r\n            return {\r\n                ...state,\r\n                focusSpan: action.payload,\r\n                MSVorder:true,\r\n                needOrder:false,\r\n            };\r\n        }\r\n        case 'UPDATE_LOCATION': {\r\n            console.log(action.payload)\r\n            return {\r\n                ...state,\r\n                location: action.payload,\r\n            };\r\n        }\r\n        case 'UPDATE_UNFOLDSWITCH': {\r\n            console.log('UNFOLD SWITHC',action.payload)\r\n            return {\r\n                ...state,\r\n                unfoldSwitch: action.payload,\r\n            };\r\n        }\r\n        case 'UPDATE_EDGEREORDER': {\r\n            console.log('EDGE ORDER',action.payload)\r\n            return {\r\n                ...state,\r\n                edgeReorder: action.payload,\r\n            };\r\n        }\r\n        case 'UPDATE_NODEORDER': {\r\n            console.log(action.payload)\r\n            return {\r\n                ...state,\r\n                nodeOrder: action.payload,\r\n                needOrder:false,\r\n                MSVorder:false\r\n            };\r\n        }\r\n        case 'UPDATE_STREAMSWITCH': {\r\n            console.log('stream',action.payload)\r\n            return {\r\n                ...state,\r\n                streamSwitch: action.payload,\r\n            };\r\n        }\r\n        case 'RESET': {\r\n            console.log(action.payload)\r\n            return {\r\n                ...state,\r\n                unfoldDay:[],\r\n                unfoldDiff:[],\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default reducer;\r\n","import { createStore, applyMiddleware, compose } from \"redux\";\r\nimport reducer from './reducer';\r\nimport thunk from 'redux-thunk';\r\n\r\nconst composeEnhancers =\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}) : compose;\r\n\r\nconst enhancer = composeEnhancers(\r\n    applyMiddleware(thunk),\r\n);\r\n\r\nconst initState = {\r\n    userID: null,\r\n    users: [],\r\n    userBehaviors: {},\r\n    dayTime: null,\r\n    hourBehaviors: {},\r\n    minBehaviorsOfHour: [],\r\n    userMinBehaviors: [],\r\n    selectedCircle: [],\r\n    selectedDiffCircle: [],\r\n    selectedDate: [],\r\n    networkView: [],\r\n    diffNetworkView: [],\r\n    timeSpan: ['start', 'end'],\r\n    unfoldDay: [],\r\n    location: {},\r\n    nodeOrder:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27],\r\n    // nodeOrder: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179],\r\n    // nodeOrder:[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\r\n    focusSpan: ['start', 'end'],\r\n    unfoldDiff: [],\r\n    needOrder: false,\r\n    unfoldSwitch: true,\r\n    edgeReorder: false,\r\n    MSVorder: false,\r\n    streamSwitch: true,\r\n}\r\n\r\nconst store = createStore(\r\n    reducer,\r\n    initState,\r\n    enhancer,\r\n);\r\n\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport store from './store'\nimport { Provider } from \"react-redux\";\n\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}